import { create } from 'zustand';
import type { DataSource, EntityMapping, EntitySchema, ProgressEvent, ChatMessage } from '@/types/migration';

type WorkspaceTab = 'migrate' | 'schemas' | 'mappings';

interface MigrationWorkspaceState {
  // Current tab
  activeTab: WorkspaceTab;
  setActiveTab: (tab: WorkspaceTab) => void;

  // Migration configuration
  name: string;
  setName: (name: string) => void;

  description: string;
  setDescription: (description: string) => void;

  // All available schemas (reference data)
  availableSchemas: EntitySchema[];
  removeAvailableSchema: (service: string, entity: string) => void;

  // Schemas (schema-first approach)
  sourceSchemas: EntitySchema[];
  setSourceSchemas: (schemas: EntitySchema[]) => void;
  addSourceSchema: (schema: EntitySchema) => void;
  updateSourceSchema: (service: string, entity: string, schema: EntitySchema) => void;
  removeSourceSchema: (service: string, entity: string) => void;

  targetSchema: EntitySchema | null;
  setTargetSchema: (schema: EntitySchema | null) => void;

  // Legacy: Sources (for execution config)
  sources: DataSource[];
  addSource: (source: DataSource) => void;
  updateSource: (index: number, source: DataSource) => void;
  removeSource: (index: number) => void;
  setSources: (sources: DataSource[]) => void;

  // Target
  targetService: string;
  setTargetService: (service: string) => void;

  targetSite: string;
  setTargetSite: (site: string) => void;

  targetApiKey: string;
  setTargetApiKey: (key: string) => void;

  // Mappings
  entityMappings: EntityMapping[];
  setEntityMappings: (mappings: EntityMapping[]) => void;
  addEntityMapping: (mapping: EntityMapping) => void;
  updateEntityMapping: (index: number, mapping: EntityMapping) => void;
  removeEntityMapping: (index: number) => void;

  // Execution options
  dryRun: boolean;
  setDryRun: (dryRun: boolean) => void;

  batchSize: number;
  setBatchSize: (size: number) => void;

  // Migration ID (after creation)
  migrationId: string | null;
  setMigrationId: (id: string | null) => void;

  // Progress tracking
  progress: ProgressEvent | null;
  setProgress: (progress: ProgressEvent | null) => void;

  // Sample data for preview
  sampleData: Record<string, unknown>[];
  setSampleData: (data: Record<string, unknown>[]) => void;

  // AI Chat
  chatMessages: ChatMessage[];
  addChatMessage: (message: ChatMessage) => void;
  clearChatMessages: () => void;

  // Schema panel collapsed state
  schemaPanelCollapsed: boolean;
  setSchemaPanelCollapsed: (collapsed: boolean) => void;

  // Schema focus state (for navigating from sidebar to schema builder)
  focusedSchema: { service: string; entity: string } | null;
  setFocusedSchema: (schema: { service: string; entity: string } | null) => void;

  // Dirty state tracking (unsaved changes)
  schemasModified: boolean;
  setSchemasModified: (modified: boolean) => void;
  mappingsModified: boolean;
  setMappingsModified: (modified: boolean) => void;

  // Saved state for discard functionality
  savedSourceSchemas: EntitySchema[];
  savedTargetSchema: EntitySchema | null;
  savedEntityMappings: EntityMapping[];

  // Mark current state as saved (called after successful save)
  markSchemasSaved: () => void;
  markMappingsSaved: () => void;

  // Discard pending changes (revert to saved state)
  discardSchemaChanges: () => void;
  discardMappingChanges: () => void;

  // Reset workspace
  reset: () => void;
}

// Comprehensive schemas from Stripe, Salesforce, and Chargebee API documentation
const seedSourceSchemas: EntitySchema[] = [
  // ============ STRIPE SCHEMAS ============
  {
    service: 'stripe',
    entity: 'Customer',
    description: 'Stripe customer object representing a customer of your business',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the customer' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type (always "customer")' },
      { name: 'email', type: 'string', required: false, description: 'Customer email address' },
      { name: 'name', type: 'string', required: false, description: 'Customer full or business name' },
      { name: 'phone', type: 'string', required: false, description: 'Customer phone number' },
      { name: 'description', type: 'string', required: false, description: 'Arbitrary string attached to object' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created (Unix epoch)' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'balance', type: 'integer', required: true, description: 'Current balance in default currency (negative=credit, positive=owed)' },
      { name: 'currency', type: 'string', required: false, description: 'Three-letter ISO currency code for billing' },
      { name: 'default_source', type: 'string', required: false, description: 'ID of default payment source' },
      { name: 'delinquent', type: 'boolean', required: false, description: 'Tracks recent invoice payment state changes' },
      { name: 'invoice_prefix', type: 'string', required: false, description: 'Prefix for generating unique invoice numbers' },
      { name: 'next_invoice_sequence', type: 'integer', required: false, description: 'Suffix of next invoice number' },
      { name: 'preferred_locales', type: 'array', required: false, description: 'Customer preferred languages ordered by preference' },
      { name: 'address', type: 'object', required: false, description: 'Customer address', properties: [
        { name: 'line1', type: 'string', required: false, description: 'Address line 1' },
        { name: 'line2', type: 'string', required: false, description: 'Address line 2' },
        { name: 'city', type: 'string', required: false, description: 'City' },
        { name: 'state', type: 'string', required: false, description: 'State/Province' },
        { name: 'postal_code', type: 'string', required: false, description: 'Postal/ZIP code' },
        { name: 'country', type: 'string', required: false, description: 'Two-letter country code' },
      ]},
      { name: 'shipping', type: 'object', required: false, description: 'Mailing/shipping address', properties: [
        { name: 'name', type: 'string', required: false, description: 'Recipient name' },
        { name: 'phone', type: 'string', required: false, description: 'Recipient phone' },
        { name: 'address', type: 'object', required: false, description: 'Shipping address' },
      ]},
      { name: 'invoice_settings', type: 'object', required: true, description: 'Default invoice settings', properties: [
        { name: 'default_payment_method', type: 'string', required: false, description: 'Default payment method ID' },
        { name: 'footer', type: 'string', required: false, description: 'Default invoice footer' },
        { name: 'custom_fields', type: 'array', required: false, description: 'Custom fields for invoices' },
      ]},
      { name: 'tax_exempt', type: 'string', required: false, description: 'Tax exemption status: none, exempt, reverse' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs for additional information' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Subscription',
    description: 'Stripe subscription for recurring billing',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the subscription' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type (always "subscription")' },
      { name: 'customer', type: 'string', required: true, description: 'ID of the customer who owns this subscription' },
      { name: 'status', type: 'string', required: true, description: 'Subscription status', enum_values: ['incomplete', 'incomplete_expired', 'trialing', 'active', 'past_due', 'canceled', 'unpaid', 'paused'] },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created (Unix epoch)' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'start_date', type: 'timestamp', required: true, description: 'Date when the subscription was first created' },
      { name: 'current_period_start', type: 'timestamp', required: true, description: 'Start of current billing period' },
      { name: 'current_period_end', type: 'timestamp', required: true, description: 'End of current billing period' },
      { name: 'billing_cycle_anchor', type: 'timestamp', required: true, description: 'Reference point for billing cycle dates' },
      { name: 'cancel_at', type: 'timestamp', required: false, description: 'Date subscription will be automatically canceled' },
      { name: 'cancel_at_period_end', type: 'boolean', required: true, description: 'Whether to cancel at end of billing period' },
      { name: 'canceled_at', type: 'timestamp', required: false, description: 'Date subscription was canceled' },
      { name: 'ended_at', type: 'timestamp', required: false, description: 'Date subscription ended' },
      { name: 'trial_start', type: 'timestamp', required: false, description: 'Start of trial period' },
      { name: 'trial_end', type: 'timestamp', required: false, description: 'End of trial period' },
      { name: 'collection_method', type: 'string', required: true, description: 'Collection method', enum_values: ['charge_automatically', 'send_invoice'] },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'description', type: 'string', required: false, description: 'Description for display to customer' },
      { name: 'default_payment_method', type: 'string', required: false, description: 'Default payment method ID' },
      { name: 'default_source', type: 'string', required: false, description: 'Default payment source ID' },
      { name: 'days_until_due', type: 'integer', required: false, description: 'Days to pay invoices (for send_invoice)' },
      { name: 'latest_invoice', type: 'string', required: false, description: 'ID of most recent invoice' },
      { name: 'pending_setup_intent', type: 'string', required: false, description: 'SetupIntent ID for SCA' },
      { name: 'schedule', type: 'string', required: false, description: 'Attached schedule ID' },
      { name: 'application', type: 'string', required: false, description: 'Connect Application ID that created subscription' },
      { name: 'application_fee_percent', type: 'number', required: false, description: 'Percentage transferred to app owner' },
      { name: 'on_behalf_of', type: 'string', required: false, description: 'Connected account for charges' },
      { name: 'items', type: 'object', required: true, description: 'List of subscription items (up to 20)', properties: [
        { name: 'data', type: 'array', required: true, description: 'Array of subscription item objects' },
      ]},
      { name: 'discounts', type: 'array', required: true, description: 'Applied discount IDs' },
      { name: 'automatic_tax', type: 'object', required: true, description: 'Automatic tax computation settings', properties: [
        { name: 'enabled', type: 'boolean', required: true, description: 'Whether Stripe auto-computes tax' },
      ]},
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Invoice',
    description: 'Stripe invoice for amounts owed by a customer',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the invoice' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type (always "invoice")' },
      { name: 'customer', type: 'string', required: true, description: 'ID of the customer to be billed' },
      { name: 'subscription', type: 'string', required: false, description: 'ID of the subscription to invoice' },
      { name: 'status', type: 'string', required: false, description: 'Invoice status', enum_values: ['draft', 'open', 'paid', 'uncollectible', 'void'] },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'number', type: 'string', required: false, description: 'Unique invoice identifier for customer' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'amount_due', type: 'integer', required: true, description: 'Final amount due in cents' },
      { name: 'amount_paid', type: 'integer', required: true, description: 'Amount paid in cents' },
      { name: 'amount_remaining', type: 'integer', required: true, description: 'Amount remaining (due - paid)' },
      { name: 'subtotal', type: 'integer', required: true, description: 'Pre-discount/tax total in cents' },
      { name: 'total', type: 'integer', required: true, description: 'Post-discount/tax amount in cents' },
      { name: 'tax', type: 'integer', required: false, description: 'Total tax amount in cents' },
      { name: 'due_date', type: 'timestamp', required: false, description: 'Payment deadline' },
      { name: 'period_start', type: 'timestamp', required: true, description: 'Usage period beginning' },
      { name: 'period_end', type: 'timestamp', required: true, description: 'Usage period ending' },
      { name: 'billing_reason', type: 'string', required: false, description: 'Why invoice was created', enum_values: ['subscription_create', 'subscription_cycle', 'subscription_update', 'manual'] },
      { name: 'collection_method', type: 'string', required: true, description: 'Collection method', enum_values: ['charge_automatically', 'send_invoice'] },
      { name: 'attempted', type: 'boolean', required: true, description: 'Payment attempt made flag' },
      { name: 'attempt_count', type: 'integer', required: true, description: 'Number of payment attempts' },
      { name: 'paid', type: 'boolean', required: true, description: 'Whether invoice has been paid' },
      { name: 'next_payment_attempt', type: 'timestamp', required: false, description: 'Scheduled retry time' },
      { name: 'customer_email', type: 'string', required: false, description: 'Customer email (frozen after finalization)' },
      { name: 'customer_name', type: 'string', required: false, description: 'Customer name (frozen after finalization)' },
      { name: 'customer_phone', type: 'string', required: false, description: 'Customer phone (frozen after finalization)' },
      { name: 'description', type: 'string', required: false, description: 'Memo/arbitrary string' },
      { name: 'footer', type: 'string', required: false, description: 'Invoice footer text' },
      { name: 'hosted_invoice_url', type: 'string', required: false, description: 'Customer-facing invoice URL' },
      { name: 'invoice_pdf', type: 'string', required: false, description: 'PDF download link' },
      { name: 'lines', type: 'object', required: true, description: 'Individual line items' },
      { name: 'discounts', type: 'array', required: true, description: 'Applied invoice-level discounts' },
      { name: 'default_payment_method', type: 'string', required: false, description: 'Preferred payment method ID' },
      { name: 'metadata', type: 'object', required: false, description: 'Key-value storage' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Product',
    description: 'Stripe product representing goods or services',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the product' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type (always "product")' },
      { name: 'active', type: 'boolean', required: true, description: 'Whether product is available for purchase' },
      { name: 'name', type: 'string', required: true, description: 'Product name for customer display' },
      { name: 'description', type: 'string', required: false, description: 'Product description for customer display' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'updated', type: 'timestamp', required: true, description: 'Time at which the object was last updated' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'default_price', type: 'string', required: false, description: 'ID of the default Price object' },
      { name: 'images', type: 'array', required: true, description: 'Up to 8 product image URLs' },
      { name: 'marketing_features', type: 'array', required: true, description: 'Up to 15 marketing features for pricing tables' },
      { name: 'shippable', type: 'boolean', required: false, description: 'Whether product involves physical goods' },
      { name: 'statement_descriptor', type: 'string', required: false, description: 'Additional info on credit card statements' },
      { name: 'tax_code', type: 'string', required: false, description: 'Tax code identifier reference' },
      { name: 'unit_label', type: 'string', required: false, description: 'Units label for receipts/invoices' },
      { name: 'url', type: 'string', required: false, description: 'URL of publicly-accessible webpage' },
      { name: 'package_dimensions', type: 'object', required: false, description: 'Shipping dimension specifications', properties: [
        { name: 'height', type: 'number', required: false, description: 'Height in inches' },
        { name: 'length', type: 'number', required: false, description: 'Length in inches' },
        { name: 'weight', type: 'number', required: false, description: 'Weight in ounces' },
        { name: 'width', type: 'number', required: false, description: 'Width in inches' },
      ]},
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Price',
    description: 'Stripe price defining cost and billing interval for products',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the price' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type (always "price")' },
      { name: 'active', type: 'boolean', required: true, description: 'Whether price is available for new purchases' },
      { name: 'product', type: 'string', required: true, description: 'ID of the product this price is for' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'type', type: 'string', required: true, description: 'Price type', enum_values: ['one_time', 'recurring'] },
      { name: 'unit_amount', type: 'integer', required: false, description: 'Unit amount in cents' },
      { name: 'unit_amount_decimal', type: 'string', required: false, description: 'Unit amount with up to 12 decimals' },
      { name: 'billing_scheme', type: 'string', required: true, description: 'Pricing scheme', enum_values: ['per_unit', 'tiered'] },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'lookup_key', type: 'string', required: false, description: 'Dynamic price retrieval key' },
      { name: 'nickname', type: 'string', required: false, description: 'Internal price description' },
      { name: 'tax_behavior', type: 'string', required: false, description: 'Tax treatment', enum_values: ['exclusive', 'inclusive', 'unspecified'] },
      { name: 'tiers_mode', type: 'string', required: false, description: 'Tiering type', enum_values: ['graduated', 'volume'] },
      { name: 'recurring', type: 'object', required: false, description: 'Recurring price components', properties: [
        { name: 'interval', type: 'string', required: true, description: 'Billing frequency', enum_values: ['day', 'week', 'month', 'year'] },
        { name: 'interval_count', type: 'integer', required: true, description: 'Intervals between billings' },
        { name: 'usage_type', type: 'string', required: true, description: 'Usage mode', enum_values: ['metered', 'licensed'] },
      ]},
      { name: 'transform_quantity', type: 'object', required: false, description: 'Usage transformation configuration', properties: [
        { name: 'divide_by', type: 'integer', required: true, description: 'Usage divisor' },
        { name: 'round', type: 'string', required: true, description: 'Rounding direction', enum_values: ['up', 'down'] },
      ]},
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'PaymentIntent',
    description: 'Stripe PaymentIntent for tracking payment lifecycle',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the PaymentIntent' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'amount', type: 'integer', required: true, description: 'Amount intended to be collected in cents' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'status', type: 'string', required: true, description: 'Payment status', enum_values: ['requires_payment_method', 'requires_confirmation', 'requires_action', 'processing', 'requires_capture', 'canceled', 'succeeded'] },
      { name: 'customer', type: 'string', required: false, description: 'ID of the customer' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'amount_received', type: 'integer', required: true, description: 'Amount actually received' },
      { name: 'capture_method', type: 'string', required: true, description: 'Capture method', enum_values: ['automatic', 'manual'] },
      { name: 'confirmation_method', type: 'string', required: true, description: 'Confirmation method', enum_values: ['automatic', 'manual'] },
      { name: 'description', type: 'string', required: false, description: 'Payment description' },
      { name: 'invoice', type: 'string', required: false, description: 'ID of the invoice' },
      { name: 'payment_method', type: 'string', required: false, description: 'ID of the payment method used' },
      { name: 'receipt_email', type: 'string', required: false, description: 'Email for receipt' },
      { name: 'statement_descriptor', type: 'string', required: false, description: 'Statement descriptor' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Charge',
    description: 'Stripe charge representing a credit card charge',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the charge' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'amount', type: 'integer', required: true, description: 'Amount charged in cents' },
      { name: 'amount_refunded', type: 'integer', required: true, description: 'Amount refunded in cents' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'status', type: 'string', required: true, description: 'Charge status', enum_values: ['succeeded', 'pending', 'failed'] },
      { name: 'customer', type: 'string', required: false, description: 'ID of the customer' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'paid', type: 'boolean', required: true, description: 'Whether charge was successful' },
      { name: 'captured', type: 'boolean', required: true, description: 'Whether charge was captured' },
      { name: 'refunded', type: 'boolean', required: true, description: 'Whether charge has been fully refunded' },
      { name: 'disputed', type: 'boolean', required: true, description: 'Whether charge is disputed' },
      { name: 'description', type: 'string', required: false, description: 'Charge description' },
      { name: 'failure_code', type: 'string', required: false, description: 'Failure error code' },
      { name: 'failure_message', type: 'string', required: false, description: 'Failure message' },
      { name: 'invoice', type: 'string', required: false, description: 'ID of the invoice' },
      { name: 'payment_intent', type: 'string', required: false, description: 'ID of the PaymentIntent' },
      { name: 'payment_method', type: 'string', required: false, description: 'ID of the payment method' },
      { name: 'receipt_email', type: 'string', required: false, description: 'Email for receipt' },
      { name: 'receipt_url', type: 'string', required: false, description: 'URL for receipt' },
      { name: 'billing_details', type: 'object', required: true, description: 'Billing information', properties: [
        { name: 'name', type: 'string', required: false, description: 'Billing name' },
        { name: 'email', type: 'string', required: false, description: 'Billing email' },
        { name: 'phone', type: 'string', required: false, description: 'Billing phone' },
        { name: 'address', type: 'object', required: false, description: 'Billing address' },
      ]},
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Refund',
    description: 'Stripe refund for returning funds to a customer',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the refund' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'amount', type: 'integer', required: true, description: 'Amount refunded in cents' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'status', type: 'string', required: true, description: 'Refund status', enum_values: ['pending', 'succeeded', 'failed', 'canceled'] },
      { name: 'charge', type: 'string', required: true, description: 'ID of the charge that was refunded' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'reason', type: 'string', required: false, description: 'Reason for the refund', enum_values: ['duplicate', 'fraudulent', 'requested_by_customer'] },
      { name: 'receipt_number', type: 'string', required: false, description: 'Transaction number for receipts' },
      { name: 'payment_intent', type: 'string', required: false, description: 'ID of the PaymentIntent' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'PaymentMethod',
    description: 'Stripe payment method for collecting payments',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the payment method' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'type', type: 'string', required: true, description: 'Type of payment method', enum_values: ['card', 'bank_account', 'sepa_debit', 'ideal', 'link'] },
      { name: 'customer', type: 'string', required: false, description: 'ID of the customer' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'billing_details', type: 'object', required: true, description: 'Billing information', properties: [
        { name: 'name', type: 'string', required: false, description: 'Billing name' },
        { name: 'email', type: 'string', required: false, description: 'Billing email' },
        { name: 'phone', type: 'string', required: false, description: 'Billing phone' },
        { name: 'address', type: 'object', required: false, description: 'Billing address' },
      ]},
      { name: 'card', type: 'object', required: false, description: 'Card details (if type is card)', properties: [
        { name: 'brand', type: 'string', required: true, description: 'Card brand' },
        { name: 'last4', type: 'string', required: true, description: 'Last 4 digits' },
        { name: 'exp_month', type: 'integer', required: true, description: 'Expiration month' },
        { name: 'exp_year', type: 'integer', required: true, description: 'Expiration year' },
        { name: 'funding', type: 'string', required: true, description: 'Card funding type' },
      ]},
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Coupon',
    description: 'Stripe coupon for discounts on subscriptions/invoices',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the coupon' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'name', type: 'string', required: false, description: 'Name of the coupon' },
      { name: 'valid', type: 'boolean', required: true, description: 'Whether coupon is valid' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'amount_off', type: 'integer', required: false, description: 'Amount off in cents (if not percent_off)' },
      { name: 'percent_off', type: 'number', required: false, description: 'Percent off (if not amount_off)' },
      { name: 'currency', type: 'string', required: false, description: 'Currency for amount_off' },
      { name: 'duration', type: 'string', required: true, description: 'Duration type', enum_values: ['forever', 'once', 'repeating'] },
      { name: 'duration_in_months', type: 'integer', required: false, description: 'Months if duration is repeating' },
      { name: 'max_redemptions', type: 'integer', required: false, description: 'Maximum times coupon can be redeemed' },
      { name: 'times_redeemed', type: 'integer', required: true, description: 'Number of times redeemed' },
      { name: 'redeem_by', type: 'timestamp', required: false, description: 'Expiration date' },
      { name: 'applies_to', type: 'object', required: false, description: 'Products coupon applies to' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Dispute',
    description: 'Stripe dispute when a customer questions a charge with their card issuer',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the dispute' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'amount', type: 'integer', required: true, description: 'Disputed amount in cents' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'charge', type: 'string', required: true, description: 'ID of the charge that was disputed' },
      { name: 'payment_intent', type: 'string', required: false, description: 'ID of the PaymentIntent' },
      { name: 'status', type: 'string', required: true, description: 'Dispute status', enum_values: ['warning_needs_response', 'warning_under_review', 'warning_closed', 'needs_response', 'under_review', 'charge_refunded', 'won', 'lost'] },
      { name: 'reason', type: 'string', required: true, description: 'Reason for dispute', enum_values: ['duplicate', 'fraudulent', 'subscription_canceled', 'product_unacceptable', 'product_not_received', 'unrecognized', 'credit_not_processed', 'general'] },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'is_charge_refundable', type: 'boolean', required: true, description: 'Whether charge is refundable' },
      { name: 'balance_transactions', type: 'array', required: true, description: 'Balance transactions related to dispute' },
      { name: 'evidence', type: 'object', required: true, description: 'Evidence to submit to dispute' },
      { name: 'evidence_details', type: 'object', required: true, description: 'Evidence submission details' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'BalanceTransaction',
    description: 'Stripe balance transaction representing funds moving through the Stripe account',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the balance transaction' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'amount', type: 'integer', required: true, description: 'Gross amount of the transaction in cents' },
      { name: 'net', type: 'integer', required: true, description: 'Net amount in cents (after fees)' },
      { name: 'fee', type: 'integer', required: true, description: 'Fees deducted in cents' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'type', type: 'string', required: true, description: 'Transaction type', enum_values: ['charge', 'refund', 'adjustment', 'application_fee', 'application_fee_refund', 'transfer', 'payment', 'payout', 'payout_failure', 'stripe_fee', 'network_cost'] },
      { name: 'status', type: 'string', required: true, description: 'Transaction status', enum_values: ['available', 'pending'] },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'available_on', type: 'timestamp', required: true, description: 'Date funds become available' },
      { name: 'description', type: 'string', required: false, description: 'Transaction description' },
      { name: 'source', type: 'string', required: false, description: 'ID of the related object (charge, refund, etc.)' },
      { name: 'reporting_category', type: 'string', required: true, description: 'Category for financial reporting' },
      { name: 'fee_details', type: 'array', required: true, description: 'Detailed breakdown of fees' },
    ],
  },
  {
    service: 'stripe',
    entity: 'SetupIntent',
    description: 'Stripe SetupIntent for saving payment details for future payments',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the SetupIntent' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'status', type: 'string', required: true, description: 'SetupIntent status', enum_values: ['requires_payment_method', 'requires_confirmation', 'requires_action', 'processing', 'canceled', 'succeeded'] },
      { name: 'customer', type: 'string', required: false, description: 'ID of the customer' },
      { name: 'payment_method', type: 'string', required: false, description: 'ID of the payment method attached' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'client_secret', type: 'string', required: true, description: 'Client secret for frontend SDK' },
      { name: 'description', type: 'string', required: false, description: 'Description for internal use' },
      { name: 'payment_method_types', type: 'array', required: true, description: 'Allowed payment method types' },
      { name: 'usage', type: 'string', required: true, description: 'How the payment method will be used', enum_values: ['off_session', 'on_session'] },
      { name: 'cancellation_reason', type: 'string', required: false, description: 'Reason for cancellation', enum_values: ['abandoned', 'requested_by_customer', 'duplicate'] },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'TaxRate',
    description: 'Stripe tax rate for applying taxes to subscriptions and invoices',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the tax rate' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'active', type: 'boolean', required: true, description: 'Whether the tax rate is active' },
      { name: 'display_name', type: 'string', required: true, description: 'Name displayed to customers' },
      { name: 'percentage', type: 'number', required: true, description: 'Tax rate percentage' },
      { name: 'inclusive', type: 'boolean', required: true, description: 'Whether tax is included in the amount' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'description', type: 'string', required: false, description: 'Tax rate description' },
      { name: 'jurisdiction', type: 'string', required: false, description: 'Jurisdiction for the tax rate' },
      { name: 'country', type: 'string', required: false, description: 'Two-letter ISO country code' },
      { name: 'state', type: 'string', required: false, description: 'State or province' },
      { name: 'tax_type', type: 'string', required: false, description: 'Type of tax', enum_values: ['vat', 'sales_tax', 'gst', 'hst', 'pst', 'qst', 'rst', 'jct'] },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Payout',
    description: 'Stripe payout representing funds sent to a bank account or debit card',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the payout' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'amount', type: 'integer', required: true, description: 'Amount to be transferred in cents' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'status', type: 'string', required: true, description: 'Payout status', enum_values: ['paid', 'pending', 'in_transit', 'canceled', 'failed'] },
      { name: 'type', type: 'string', required: true, description: 'Payout type', enum_values: ['bank_account', 'card'] },
      { name: 'method', type: 'string', required: true, description: 'Delivery method', enum_values: ['standard', 'instant'] },
      { name: 'arrival_date', type: 'timestamp', required: true, description: 'Expected arrival date' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'balance_transaction', type: 'string', required: false, description: 'ID of the balance transaction' },
      { name: 'description', type: 'string', required: false, description: 'Payout description' },
      { name: 'destination', type: 'string', required: false, description: 'ID of the bank account or card' },
      { name: 'failure_code', type: 'string', required: false, description: 'Error code for failed payouts' },
      { name: 'failure_message', type: 'string', required: false, description: 'Error message for failed payouts' },
      { name: 'statement_descriptor', type: 'string', required: false, description: 'Statement descriptor' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Plan',
    description: 'Stripe plan defining billing and pricing for subscriptions (legacy, use Price)',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the plan' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'active', type: 'boolean', required: true, description: 'Whether the plan is available for subscriptions' },
      { name: 'amount', type: 'integer', required: false, description: 'Amount in cents per period' },
      { name: 'amount_decimal', type: 'string', required: false, description: 'Amount with decimals' },
      { name: 'currency', type: 'string', required: true, description: 'Three-letter ISO currency code' },
      { name: 'interval', type: 'string', required: true, description: 'Billing frequency', enum_values: ['day', 'week', 'month', 'year'] },
      { name: 'interval_count', type: 'integer', required: true, description: 'Number of intervals between billings' },
      { name: 'product', type: 'string', required: true, description: 'ID of the product' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'nickname', type: 'string', required: false, description: 'Brief plan description' },
      { name: 'trial_period_days', type: 'integer', required: false, description: 'Default trial days' },
      { name: 'usage_type', type: 'string', required: true, description: 'Usage type', enum_values: ['metered', 'licensed'] },
      { name: 'billing_scheme', type: 'string', required: true, description: 'Billing scheme', enum_values: ['per_unit', 'tiered'] },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'PromotionCode',
    description: 'Stripe promotion code representing a customer-redeemable code for a coupon',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the promotion code' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'code', type: 'string', required: true, description: 'Customer-facing code' },
      { name: 'coupon', type: 'string', required: true, description: 'ID of the coupon for this promotion code' },
      { name: 'active', type: 'boolean', required: true, description: 'Whether the promotion code is active' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'customer', type: 'string', required: false, description: 'Customer restriction' },
      { name: 'expires_at', type: 'timestamp', required: false, description: 'Expiration date' },
      { name: 'max_redemptions', type: 'integer', required: false, description: 'Maximum redemptions' },
      { name: 'times_redeemed', type: 'integer', required: true, description: 'Number of times redeemed' },
      { name: 'restrictions', type: 'object', required: true, description: 'Restrictions on redemption', properties: [
        { name: 'first_time_transaction', type: 'boolean', required: true, description: 'New customers only' },
        { name: 'minimum_amount', type: 'integer', required: false, description: 'Minimum order amount' },
        { name: 'minimum_amount_currency', type: 'string', required: false, description: 'Currency for minimum amount' },
      ]},
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  {
    service: 'stripe',
    entity: 'Event',
    description: 'Stripe event representing a change to a Stripe object (webhooks)',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the event' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'type', type: 'string', required: true, description: 'Event type (e.g., customer.created, invoice.paid)' },
      { name: 'api_version', type: 'string', required: false, description: 'API version used to render data' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'livemode', type: 'boolean', required: true, description: 'True if live mode, false if test mode' },
      { name: 'data', type: 'object', required: true, description: 'Object containing data of the event', properties: [
        { name: 'object', type: 'object', required: true, description: 'The object the event is about' },
        { name: 'previous_attributes', type: 'object', required: false, description: 'Previous values for updated attributes' },
      ]},
      { name: 'pending_webhooks', type: 'integer', required: true, description: 'Number of webhooks pending for this event' },
      { name: 'request', type: 'object', required: false, description: 'Information on the request that created this event', properties: [
        { name: 'id', type: 'string', required: false, description: 'ID of the API request' },
        { name: 'idempotency_key', type: 'string', required: false, description: 'Idempotency key of the request' },
      ]},
    ],
  },
  {
    service: 'stripe',
    entity: 'Account',
    description: 'Stripe Account representing a Stripe account (Connect)',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the account' },
      { name: 'object', type: 'string', required: true, description: 'String representing object type' },
      { name: 'type', type: 'string', required: true, description: 'Account type', enum_values: ['standard', 'express', 'custom'] },
      { name: 'country', type: 'string', required: true, description: 'Two-letter country code' },
      { name: 'email', type: 'string', required: false, description: 'Primary email address' },
      { name: 'created', type: 'timestamp', required: true, description: 'Time at which the object was created' },
      { name: 'charges_enabled', type: 'boolean', required: true, description: 'Whether account can process charges' },
      { name: 'payouts_enabled', type: 'boolean', required: true, description: 'Whether payouts are enabled' },
      { name: 'details_submitted', type: 'boolean', required: true, description: 'Whether details have been submitted' },
      { name: 'default_currency', type: 'string', required: false, description: 'Default currency for account' },
      { name: 'business_profile', type: 'object', required: false, description: 'Business information', properties: [
        { name: 'name', type: 'string', required: false, description: 'Business name' },
        { name: 'url', type: 'string', required: false, description: 'Business URL' },
        { name: 'support_email', type: 'string', required: false, description: 'Support email' },
        { name: 'support_phone', type: 'string', required: false, description: 'Support phone' },
      ]},
      { name: 'capabilities', type: 'object', required: false, description: 'Account capabilities' },
      { name: 'settings', type: 'object', required: false, description: 'Account settings' },
      { name: 'metadata', type: 'object', required: true, description: 'Set of key-value pairs' },
    ],
  },
  // ============ SALESFORCE SCHEMAS ============
  {
    service: 'salesforce',
    entity: 'Account',
    description: 'Salesforce Account representing a company or organization',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Name', type: 'string', required: true, description: 'Account name' },
      { name: 'Type', type: 'string', required: false, description: 'Account type', enum_values: ['Prospect', 'Customer', 'Partner', 'Competitor', 'Other'] },
      { name: 'Industry', type: 'string', required: false, description: 'Industry of the account' },
      { name: 'AnnualRevenue', type: 'number', required: false, description: 'Annual revenue' },
      { name: 'NumberOfEmployees', type: 'integer', required: false, description: 'Number of employees' },
      { name: 'Website', type: 'string', required: false, description: 'Company website URL' },
      { name: 'Phone', type: 'string', required: false, description: 'Primary phone number' },
      { name: 'Fax', type: 'string', required: false, description: 'Fax number' },
      { name: 'Description', type: 'string', required: false, description: 'Account description' },
      { name: 'BillingStreet', type: 'string', required: false, description: 'Billing street address' },
      { name: 'BillingCity', type: 'string', required: false, description: 'Billing city' },
      { name: 'BillingState', type: 'string', required: false, description: 'Billing state/province' },
      { name: 'BillingPostalCode', type: 'string', required: false, description: 'Billing postal code' },
      { name: 'BillingCountry', type: 'string', required: false, description: 'Billing country' },
      { name: 'ShippingStreet', type: 'string', required: false, description: 'Shipping street address' },
      { name: 'ShippingCity', type: 'string', required: false, description: 'Shipping city' },
      { name: 'ShippingState', type: 'string', required: false, description: 'Shipping state/province' },
      { name: 'ShippingPostalCode', type: 'string', required: false, description: 'Shipping postal code' },
      { name: 'ShippingCountry', type: 'string', required: false, description: 'Shipping country' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'ParentId', type: 'string', required: false, description: 'Parent account ID' },
      { name: 'AccountSource', type: 'string', required: false, description: 'Lead source' },
      { name: 'Rating', type: 'string', required: false, description: 'Account rating', enum_values: ['Hot', 'Warm', 'Cold'] },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
      { name: 'IsDeleted', type: 'boolean', required: false, description: 'Whether record is deleted' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Contact',
    description: 'Salesforce Contact representing a person associated with an account',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'FirstName', type: 'string', required: false, description: 'First name' },
      { name: 'LastName', type: 'string', required: true, description: 'Last name' },
      { name: 'Salutation', type: 'string', required: false, description: 'Salutation', enum_values: ['Mr.', 'Ms.', 'Mrs.', 'Dr.', 'Prof.'] },
      { name: 'Name', type: 'string', required: false, description: 'Full name (read-only, concatenation of names)' },
      { name: 'Email', type: 'string', required: false, description: 'Email address' },
      { name: 'Phone', type: 'string', required: false, description: 'Phone number' },
      { name: 'MobilePhone', type: 'string', required: false, description: 'Mobile phone number' },
      { name: 'HomePhone', type: 'string', required: false, description: 'Home phone number' },
      { name: 'OtherPhone', type: 'string', required: false, description: 'Other phone number' },
      { name: 'Fax', type: 'string', required: false, description: 'Fax number' },
      { name: 'Title', type: 'string', required: false, description: 'Job title' },
      { name: 'Department', type: 'string', required: false, description: 'Department' },
      { name: 'AccountId', type: 'string', required: false, description: 'Associated account ID' },
      { name: 'ReportsToId', type: 'string', required: false, description: 'Manager contact ID' },
      { name: 'MailingStreet', type: 'string', required: false, description: 'Mailing street address' },
      { name: 'MailingCity', type: 'string', required: false, description: 'Mailing city' },
      { name: 'MailingState', type: 'string', required: false, description: 'Mailing state/province' },
      { name: 'MailingPostalCode', type: 'string', required: false, description: 'Mailing postal code' },
      { name: 'MailingCountry', type: 'string', required: false, description: 'Mailing country' },
      { name: 'OtherStreet', type: 'string', required: false, description: 'Other street address' },
      { name: 'OtherCity', type: 'string', required: false, description: 'Other city' },
      { name: 'OtherState', type: 'string', required: false, description: 'Other state/province' },
      { name: 'OtherPostalCode', type: 'string', required: false, description: 'Other postal code' },
      { name: 'OtherCountry', type: 'string', required: false, description: 'Other country' },
      { name: 'Birthdate', type: 'string', required: false, description: 'Date of birth' },
      { name: 'Description', type: 'string', required: false, description: 'Contact description' },
      { name: 'LeadSource', type: 'string', required: false, description: 'Lead source' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'HasOptedOutOfEmail', type: 'boolean', required: false, description: 'Email opt-out status' },
      { name: 'DoNotCall', type: 'boolean', required: false, description: 'Do not call flag' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
      { name: 'IsDeleted', type: 'boolean', required: false, description: 'Whether record is deleted' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Lead',
    description: 'Salesforce Lead representing a potential customer',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'FirstName', type: 'string', required: false, description: 'First name' },
      { name: 'LastName', type: 'string', required: true, description: 'Last name' },
      { name: 'Salutation', type: 'string', required: false, description: 'Salutation' },
      { name: 'Name', type: 'string', required: false, description: 'Full name (read-only)' },
      { name: 'Company', type: 'string', required: true, description: 'Company name' },
      { name: 'Title', type: 'string', required: false, description: 'Job title' },
      { name: 'Email', type: 'string', required: false, description: 'Email address' },
      { name: 'Phone', type: 'string', required: false, description: 'Phone number' },
      { name: 'MobilePhone', type: 'string', required: false, description: 'Mobile phone number' },
      { name: 'Fax', type: 'string', required: false, description: 'Fax number' },
      { name: 'Website', type: 'string', required: false, description: 'Website URL' },
      { name: 'Industry', type: 'string', required: false, description: 'Industry' },
      { name: 'NumberOfEmployees', type: 'integer', required: false, description: 'Number of employees' },
      { name: 'AnnualRevenue', type: 'number', required: false, description: 'Annual revenue' },
      { name: 'Rating', type: 'string', required: false, description: 'Lead rating', enum_values: ['Hot', 'Warm', 'Cold'] },
      { name: 'Status', type: 'string', required: true, description: 'Lead status', enum_values: ['Open', 'Working', 'Closed', 'Converted'] },
      { name: 'LeadSource', type: 'string', required: false, description: 'Lead source' },
      { name: 'Street', type: 'string', required: false, description: 'Street address' },
      { name: 'City', type: 'string', required: false, description: 'City' },
      { name: 'State', type: 'string', required: false, description: 'State/province' },
      { name: 'PostalCode', type: 'string', required: false, description: 'Postal code' },
      { name: 'Country', type: 'string', required: false, description: 'Country' },
      { name: 'Description', type: 'string', required: false, description: 'Lead description' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'IsConverted', type: 'boolean', required: false, description: 'Whether lead has been converted' },
      { name: 'ConvertedAccountId', type: 'string', required: false, description: 'Converted account ID' },
      { name: 'ConvertedContactId', type: 'string', required: false, description: 'Converted contact ID' },
      { name: 'ConvertedOpportunityId', type: 'string', required: false, description: 'Converted opportunity ID' },
      { name: 'ConvertedDate', type: 'string', required: false, description: 'Conversion date' },
      { name: 'HasOptedOutOfEmail', type: 'boolean', required: false, description: 'Email opt-out status' },
      { name: 'DoNotCall', type: 'boolean', required: false, description: 'Do not call flag' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
      { name: 'IsDeleted', type: 'boolean', required: false, description: 'Whether record is deleted' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Opportunity',
    description: 'Salesforce Opportunity representing a sales opportunity',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Name', type: 'string', required: true, description: 'Opportunity name' },
      { name: 'AccountId', type: 'string', required: false, description: 'Associated account ID' },
      { name: 'Amount', type: 'number', required: false, description: 'Opportunity amount' },
      { name: 'CloseDate', type: 'string', required: true, description: 'Expected close date' },
      { name: 'StageName', type: 'string', required: true, description: 'Sales stage', enum_values: ['Prospecting', 'Qualification', 'Needs Analysis', 'Value Proposition', 'Proposal', 'Negotiation', 'Closed Won', 'Closed Lost'] },
      { name: 'Probability', type: 'number', required: false, description: 'Win probability percentage' },
      { name: 'Type', type: 'string', required: false, description: 'Opportunity type', enum_values: ['New Business', 'Existing Business'] },
      { name: 'LeadSource', type: 'string', required: false, description: 'Lead source' },
      { name: 'NextStep', type: 'string', required: false, description: 'Next step description' },
      { name: 'Description', type: 'string', required: false, description: 'Opportunity description' },
      { name: 'IsClosed', type: 'boolean', required: false, description: 'Whether opportunity is closed' },
      { name: 'IsWon', type: 'boolean', required: false, description: 'Whether opportunity was won' },
      { name: 'ForecastCategory', type: 'string', required: false, description: 'Forecast category' },
      { name: 'ForecastCategoryName', type: 'string', required: false, description: 'Forecast category name' },
      { name: 'CampaignId', type: 'string', required: false, description: 'Primary campaign ID' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'ContactId', type: 'string', required: false, description: 'Primary contact ID' },
      { name: 'Pricebook2Id', type: 'string', required: false, description: 'Price book ID' },
      { name: 'ExpectedRevenue', type: 'number', required: false, description: 'Expected revenue (Amount * Probability)' },
      { name: 'TotalOpportunityQuantity', type: 'number', required: false, description: 'Total quantity' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
      { name: 'IsDeleted', type: 'boolean', required: false, description: 'Whether record is deleted' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Campaign',
    description: 'Salesforce Campaign for marketing campaigns',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Name', type: 'string', required: true, description: 'Campaign name' },
      { name: 'Type', type: 'string', required: false, description: 'Campaign type' },
      { name: 'Status', type: 'string', required: false, description: 'Campaign status', enum_values: ['Planned', 'In Progress', 'Completed', 'Aborted'] },
      { name: 'StartDate', type: 'string', required: false, description: 'Campaign start date' },
      { name: 'EndDate', type: 'string', required: false, description: 'Campaign end date' },
      { name: 'Description', type: 'string', required: false, description: 'Campaign description' },
      { name: 'BudgetedCost', type: 'number', required: false, description: 'Budgeted cost' },
      { name: 'ActualCost', type: 'number', required: false, description: 'Actual cost' },
      { name: 'ExpectedRevenue', type: 'number', required: false, description: 'Expected revenue' },
      { name: 'ExpectedResponse', type: 'number', required: false, description: 'Expected response rate percentage' },
      { name: 'NumberSent', type: 'number', required: false, description: 'Number sent' },
      { name: 'NumberOfLeads', type: 'integer', required: false, description: 'Number of leads' },
      { name: 'NumberOfContacts', type: 'integer', required: false, description: 'Number of contacts' },
      { name: 'NumberOfResponses', type: 'integer', required: false, description: 'Number of responses' },
      { name: 'NumberOfOpportunities', type: 'integer', required: false, description: 'Number of opportunities' },
      { name: 'NumberOfWonOpportunities', type: 'integer', required: false, description: 'Number of won opportunities' },
      { name: 'AmountAllOpportunities', type: 'number', required: false, description: 'Total amount of all opportunities' },
      { name: 'AmountWonOpportunities', type: 'number', required: false, description: 'Total amount of won opportunities' },
      { name: 'IsActive', type: 'boolean', required: false, description: 'Whether campaign is active' },
      { name: 'ParentId', type: 'string', required: false, description: 'Parent campaign ID' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Case',
    description: 'Salesforce Case for customer support tickets',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'CaseNumber', type: 'string', required: false, description: 'Auto-generated case number' },
      { name: 'Subject', type: 'string', required: false, description: 'Case subject' },
      { name: 'Description', type: 'string', required: false, description: 'Case description' },
      { name: 'Status', type: 'string', required: false, description: 'Case status', enum_values: ['New', 'Working', 'Escalated', 'Closed'] },
      { name: 'Priority', type: 'string', required: false, description: 'Case priority', enum_values: ['High', 'Medium', 'Low'] },
      { name: 'Origin', type: 'string', required: false, description: 'Case origin', enum_values: ['Phone', 'Email', 'Web'] },
      { name: 'Type', type: 'string', required: false, description: 'Case type' },
      { name: 'Reason', type: 'string', required: false, description: 'Case reason' },
      { name: 'AccountId', type: 'string', required: false, description: 'Associated account ID' },
      { name: 'ContactId', type: 'string', required: false, description: 'Associated contact ID' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'ParentId', type: 'string', required: false, description: 'Parent case ID' },
      { name: 'SuppliedEmail', type: 'string', required: false, description: 'Email of case creator' },
      { name: 'SuppliedName', type: 'string', required: false, description: 'Name of case creator' },
      { name: 'SuppliedPhone', type: 'string', required: false, description: 'Phone of case creator' },
      { name: 'SuppliedCompany', type: 'string', required: false, description: 'Company of case creator' },
      { name: 'IsClosed', type: 'boolean', required: false, description: 'Whether case is closed' },
      { name: 'IsEscalated', type: 'boolean', required: false, description: 'Whether case is escalated' },
      { name: 'ClosedDate', type: 'timestamp', required: false, description: 'Date case was closed' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'User',
    description: 'Salesforce User representing a user in the organization',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Username', type: 'string', required: true, description: 'Username (email format)' },
      { name: 'FirstName', type: 'string', required: false, description: 'First name' },
      { name: 'LastName', type: 'string', required: true, description: 'Last name' },
      { name: 'Name', type: 'string', required: false, description: 'Full name (read-only)' },
      { name: 'Email', type: 'string', required: true, description: 'Email address' },
      { name: 'Phone', type: 'string', required: false, description: 'Phone number' },
      { name: 'MobilePhone', type: 'string', required: false, description: 'Mobile phone' },
      { name: 'Title', type: 'string', required: false, description: 'Job title' },
      { name: 'Department', type: 'string', required: false, description: 'Department' },
      { name: 'Division', type: 'string', required: false, description: 'Division' },
      { name: 'CompanyName', type: 'string', required: false, description: 'Company name' },
      { name: 'Street', type: 'string', required: false, description: 'Street address' },
      { name: 'City', type: 'string', required: false, description: 'City' },
      { name: 'State', type: 'string', required: false, description: 'State/province' },
      { name: 'PostalCode', type: 'string', required: false, description: 'Postal code' },
      { name: 'Country', type: 'string', required: false, description: 'Country' },
      { name: 'TimeZoneSidKey', type: 'string', required: true, description: 'User timezone' },
      { name: 'LocaleSidKey', type: 'string', required: true, description: 'User locale' },
      { name: 'LanguageLocaleKey', type: 'string', required: true, description: 'User language' },
      { name: 'EmailEncodingKey', type: 'string', required: true, description: 'Email encoding' },
      { name: 'ProfileId', type: 'string', required: true, description: 'Profile ID' },
      { name: 'UserRoleId', type: 'string', required: false, description: 'User role ID' },
      { name: 'ManagerId', type: 'string', required: false, description: 'Manager user ID' },
      { name: 'Alias', type: 'string', required: true, description: 'User alias' },
      { name: 'CommunityNickname', type: 'string', required: true, description: 'Community nickname' },
      { name: 'IsActive', type: 'boolean', required: true, description: 'Whether user is active' },
      { name: 'UserType', type: 'string', required: false, description: 'User type' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
      { name: 'LastLoginDate', type: 'timestamp', required: false, description: 'Last login date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Task',
    description: 'Salesforce Task representing a to-do item or activity',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Subject', type: 'string', required: false, description: 'Task subject' },
      { name: 'Status', type: 'string', required: true, description: 'Task status', enum_values: ['Not Started', 'In Progress', 'Completed', 'Waiting on someone else', 'Deferred'] },
      { name: 'Priority', type: 'string', required: true, description: 'Task priority', enum_values: ['High', 'Normal', 'Low'] },
      { name: 'ActivityDate', type: 'string', required: false, description: 'Due date' },
      { name: 'Description', type: 'string', required: false, description: 'Task description' },
      { name: 'WhoId', type: 'string', required: false, description: 'Related lead or contact ID' },
      { name: 'WhatId', type: 'string', required: false, description: 'Related record ID (Account, Opportunity, etc.)' },
      { name: 'OwnerId', type: 'string', required: true, description: 'Owner user ID' },
      { name: 'Type', type: 'string', required: false, description: 'Task type' },
      { name: 'IsHighPriority', type: 'boolean', required: false, description: 'High priority flag' },
      { name: 'IsClosed', type: 'boolean', required: false, description: 'Whether task is closed' },
      { name: 'IsRecurrence', type: 'boolean', required: false, description: 'Whether task is recurring' },
      { name: 'ReminderDateTime', type: 'timestamp', required: false, description: 'Reminder date/time' },
      { name: 'IsReminderSet', type: 'boolean', required: false, description: 'Whether reminder is set' },
      { name: 'CallType', type: 'string', required: false, description: 'Call type', enum_values: ['Inbound', 'Outbound', 'Internal'] },
      { name: 'CallDurationInSeconds', type: 'integer', required: false, description: 'Call duration in seconds' },
      { name: 'CallDisposition', type: 'string', required: false, description: 'Call result' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Event',
    description: 'Salesforce Event representing a calendar event or meeting',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Subject', type: 'string', required: false, description: 'Event subject' },
      { name: 'Location', type: 'string', required: false, description: 'Event location' },
      { name: 'Description', type: 'string', required: false, description: 'Event description' },
      { name: 'StartDateTime', type: 'timestamp', required: true, description: 'Start date/time' },
      { name: 'EndDateTime', type: 'timestamp', required: true, description: 'End date/time' },
      { name: 'ActivityDate', type: 'string', required: false, description: 'Activity date' },
      { name: 'DurationInMinutes', type: 'integer', required: false, description: 'Duration in minutes' },
      { name: 'IsAllDayEvent', type: 'boolean', required: true, description: 'All day event flag' },
      { name: 'WhoId', type: 'string', required: false, description: 'Related lead or contact ID' },
      { name: 'WhatId', type: 'string', required: false, description: 'Related record ID' },
      { name: 'OwnerId', type: 'string', required: true, description: 'Owner user ID' },
      { name: 'Type', type: 'string', required: false, description: 'Event type' },
      { name: 'ShowAs', type: 'string', required: false, description: 'Show as status', enum_values: ['Busy', 'OutOfOffice', 'Free'] },
      { name: 'IsPrivate', type: 'boolean', required: false, description: 'Private event flag' },
      { name: 'IsRecurrence', type: 'boolean', required: false, description: 'Whether event is recurring' },
      { name: 'ReminderDateTime', type: 'timestamp', required: false, description: 'Reminder date/time' },
      { name: 'IsReminderSet', type: 'boolean', required: false, description: 'Whether reminder is set' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Product2',
    description: 'Salesforce Product representing a product or service',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Name', type: 'string', required: true, description: 'Product name' },
      { name: 'ProductCode', type: 'string', required: false, description: 'Product code/SKU' },
      { name: 'Description', type: 'string', required: false, description: 'Product description' },
      { name: 'IsActive', type: 'boolean', required: true, description: 'Whether product is active' },
      { name: 'Family', type: 'string', required: false, description: 'Product family' },
      { name: 'QuantityUnitOfMeasure', type: 'string', required: false, description: 'Unit of measure' },
      { name: 'DisplayUrl', type: 'string', required: false, description: 'Product URL' },
      { name: 'ExternalId', type: 'string', required: false, description: 'External ID' },
      { name: 'StockKeepingUnit', type: 'string', required: false, description: 'SKU' },
      { name: 'IsArchived', type: 'boolean', required: false, description: 'Whether product is archived' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'PricebookEntry',
    description: 'Salesforce Pricebook Entry linking products to price books',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Pricebook2Id', type: 'string', required: true, description: 'Price book ID' },
      { name: 'Product2Id', type: 'string', required: true, description: 'Product ID' },
      { name: 'UnitPrice', type: 'number', required: true, description: 'Unit price' },
      { name: 'IsActive', type: 'boolean', required: true, description: 'Whether entry is active' },
      { name: 'UseStandardPrice', type: 'boolean', required: false, description: 'Use standard price' },
      { name: 'Name', type: 'string', required: false, description: 'Entry name (read-only)' },
      { name: 'ProductCode', type: 'string', required: false, description: 'Product code (read-only)' },
      { name: 'CurrencyIsoCode', type: 'string', required: false, description: 'Currency code' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Order',
    description: 'Salesforce Order representing a customer order',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'OrderNumber', type: 'string', required: false, description: 'Auto-generated order number' },
      { name: 'Name', type: 'string', required: false, description: 'Order name' },
      { name: 'AccountId', type: 'string', required: true, description: 'Account ID' },
      { name: 'ContractId', type: 'string', required: false, description: 'Contract ID' },
      { name: 'Pricebook2Id', type: 'string', required: false, description: 'Price book ID' },
      { name: 'OpportunityId', type: 'string', required: false, description: 'Opportunity ID' },
      { name: 'QuoteId', type: 'string', required: false, description: 'Quote ID' },
      { name: 'Status', type: 'string', required: true, description: 'Order status', enum_values: ['Draft', 'Activated'] },
      { name: 'EffectiveDate', type: 'string', required: true, description: 'Order start date' },
      { name: 'EndDate', type: 'string', required: false, description: 'Order end date' },
      { name: 'Type', type: 'string', required: false, description: 'Order type' },
      { name: 'Description', type: 'string', required: false, description: 'Order description' },
      { name: 'TotalAmount', type: 'number', required: false, description: 'Total amount' },
      { name: 'BillingStreet', type: 'string', required: false, description: 'Billing street' },
      { name: 'BillingCity', type: 'string', required: false, description: 'Billing city' },
      { name: 'BillingState', type: 'string', required: false, description: 'Billing state' },
      { name: 'BillingPostalCode', type: 'string', required: false, description: 'Billing postal code' },
      { name: 'BillingCountry', type: 'string', required: false, description: 'Billing country' },
      { name: 'ShippingStreet', type: 'string', required: false, description: 'Shipping street' },
      { name: 'ShippingCity', type: 'string', required: false, description: 'Shipping city' },
      { name: 'ShippingState', type: 'string', required: false, description: 'Shipping state' },
      { name: 'ShippingPostalCode', type: 'string', required: false, description: 'Shipping postal code' },
      { name: 'ShippingCountry', type: 'string', required: false, description: 'Shipping country' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
      { name: 'ActivatedDate', type: 'timestamp', required: false, description: 'Activation date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'OrderItem',
    description: 'Salesforce Order Item representing a line item on an order',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'OrderId', type: 'string', required: true, description: 'Parent order ID' },
      { name: 'Product2Id', type: 'string', required: false, description: 'Product ID' },
      { name: 'PricebookEntryId', type: 'string', required: true, description: 'Pricebook entry ID' },
      { name: 'Quantity', type: 'number', required: true, description: 'Quantity' },
      { name: 'UnitPrice', type: 'number', required: true, description: 'Unit price' },
      { name: 'TotalPrice', type: 'number', required: false, description: 'Total price (read-only)' },
      { name: 'ListPrice', type: 'number', required: false, description: 'List price (read-only)' },
      { name: 'Description', type: 'string', required: false, description: 'Item description' },
      { name: 'ServiceDate', type: 'string', required: false, description: 'Service date' },
      { name: 'EndDate', type: 'string', required: false, description: 'End date' },
      { name: 'OrderItemNumber', type: 'string', required: false, description: 'Item number' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Asset',
    description: 'Salesforce Asset representing a product owned by a customer',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'Name', type: 'string', required: true, description: 'Asset name' },
      { name: 'AccountId', type: 'string', required: false, description: 'Account ID' },
      { name: 'ContactId', type: 'string', required: false, description: 'Contact ID' },
      { name: 'Product2Id', type: 'string', required: false, description: 'Product ID' },
      { name: 'SerialNumber', type: 'string', required: false, description: 'Serial number' },
      { name: 'Status', type: 'string', required: false, description: 'Asset status', enum_values: ['Purchased', 'Shipped', 'Installed', 'Registered', 'Obsolete'] },
      { name: 'Price', type: 'number', required: false, description: 'Asset price' },
      { name: 'Quantity', type: 'number', required: false, description: 'Quantity' },
      { name: 'Description', type: 'string', required: false, description: 'Asset description' },
      { name: 'InstallDate', type: 'string', required: false, description: 'Installation date' },
      { name: 'PurchaseDate', type: 'string', required: false, description: 'Purchase date' },
      { name: 'UsageEndDate', type: 'string', required: false, description: 'Usage end date' },
      { name: 'ParentId', type: 'string', required: false, description: 'Parent asset ID' },
      { name: 'RootAssetId', type: 'string', required: false, description: 'Root asset ID' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'IsCompetitorProduct', type: 'boolean', required: false, description: 'Competitor product flag' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Contract',
    description: 'Salesforce Contract representing a customer agreement',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'ContractNumber', type: 'string', required: false, description: 'Auto-generated contract number' },
      { name: 'AccountId', type: 'string', required: true, description: 'Account ID' },
      { name: 'Status', type: 'string', required: true, description: 'Contract status', enum_values: ['Draft', 'In Approval Process', 'Activated'] },
      { name: 'StatusCode', type: 'string', required: false, description: 'Status code' },
      { name: 'StartDate', type: 'string', required: false, description: 'Contract start date' },
      { name: 'EndDate', type: 'string', required: false, description: 'Contract end date' },
      { name: 'ContractTerm', type: 'integer', required: false, description: 'Contract term in months' },
      { name: 'OwnerExpirationNotice', type: 'string', required: false, description: 'Days before expiration to notify owner' },
      { name: 'CompanySignedDate', type: 'string', required: false, description: 'Company signed date' },
      { name: 'CompanySignedId', type: 'string', required: false, description: 'Company signer ID' },
      { name: 'CustomerSignedDate', type: 'string', required: false, description: 'Customer signed date' },
      { name: 'CustomerSignedId', type: 'string', required: false, description: 'Customer signer ID' },
      { name: 'CustomerSignedTitle', type: 'string', required: false, description: 'Customer signer title' },
      { name: 'SpecialTerms', type: 'string', required: false, description: 'Special terms' },
      { name: 'Description', type: 'string', required: false, description: 'Contract description' },
      { name: 'BillingStreet', type: 'string', required: false, description: 'Billing street' },
      { name: 'BillingCity', type: 'string', required: false, description: 'Billing city' },
      { name: 'BillingState', type: 'string', required: false, description: 'Billing state' },
      { name: 'BillingPostalCode', type: 'string', required: false, description: 'Billing postal code' },
      { name: 'BillingCountry', type: 'string', required: false, description: 'Billing country' },
      { name: 'ShippingStreet', type: 'string', required: false, description: 'Shipping street' },
      { name: 'ShippingCity', type: 'string', required: false, description: 'Shipping city' },
      { name: 'ShippingState', type: 'string', required: false, description: 'Shipping state' },
      { name: 'ShippingPostalCode', type: 'string', required: false, description: 'Shipping postal code' },
      { name: 'ShippingCountry', type: 'string', required: false, description: 'Shipping country' },
      { name: 'Pricebook2Id', type: 'string', required: false, description: 'Price book ID' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'ActivatedDate', type: 'timestamp', required: false, description: 'Activation date' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'Quote',
    description: 'Salesforce Quote representing a sales quote',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'QuoteNumber', type: 'string', required: false, description: 'Auto-generated quote number' },
      { name: 'Name', type: 'string', required: true, description: 'Quote name' },
      { name: 'OpportunityId', type: 'string', required: true, description: 'Opportunity ID' },
      { name: 'Pricebook2Id', type: 'string', required: false, description: 'Price book ID' },
      { name: 'AccountId', type: 'string', required: false, description: 'Account ID (read-only)' },
      { name: 'ContactId', type: 'string', required: false, description: 'Contact ID' },
      { name: 'Status', type: 'string', required: true, description: 'Quote status', enum_values: ['Draft', 'Needs Review', 'In Review', 'Approved', 'Rejected', 'Presented', 'Accepted', 'Denied'] },
      { name: 'ExpirationDate', type: 'string', required: false, description: 'Expiration date' },
      { name: 'Description', type: 'string', required: false, description: 'Quote description' },
      { name: 'Subtotal', type: 'number', required: false, description: 'Subtotal (read-only)' },
      { name: 'TotalPrice', type: 'number', required: false, description: 'Total price (read-only)' },
      { name: 'Discount', type: 'number', required: false, description: 'Discount percentage' },
      { name: 'GrandTotal', type: 'number', required: false, description: 'Grand total (read-only)' },
      { name: 'Tax', type: 'number', required: false, description: 'Tax amount' },
      { name: 'ShippingHandling', type: 'number', required: false, description: 'Shipping and handling' },
      { name: 'BillingStreet', type: 'string', required: false, description: 'Billing street' },
      { name: 'BillingCity', type: 'string', required: false, description: 'Billing city' },
      { name: 'BillingState', type: 'string', required: false, description: 'Billing state' },
      { name: 'BillingPostalCode', type: 'string', required: false, description: 'Billing postal code' },
      { name: 'BillingCountry', type: 'string', required: false, description: 'Billing country' },
      { name: 'ShippingStreet', type: 'string', required: false, description: 'Shipping street' },
      { name: 'ShippingCity', type: 'string', required: false, description: 'Shipping city' },
      { name: 'ShippingState', type: 'string', required: false, description: 'Shipping state' },
      { name: 'ShippingPostalCode', type: 'string', required: false, description: 'Shipping postal code' },
      { name: 'ShippingCountry', type: 'string', required: false, description: 'Shipping country' },
      { name: 'IsSyncing', type: 'boolean', required: false, description: 'Whether quote is syncing with opportunity' },
      { name: 'OwnerId', type: 'string', required: false, description: 'Owner user ID' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'OpportunityLineItem',
    description: 'Salesforce Opportunity Line Item representing a product on an opportunity',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'OpportunityId', type: 'string', required: true, description: 'Opportunity ID' },
      { name: 'Product2Id', type: 'string', required: false, description: 'Product ID' },
      { name: 'PricebookEntryId', type: 'string', required: true, description: 'Pricebook entry ID' },
      { name: 'Name', type: 'string', required: false, description: 'Product name (read-only)' },
      { name: 'Quantity', type: 'number', required: true, description: 'Quantity' },
      { name: 'UnitPrice', type: 'number', required: false, description: 'Unit price' },
      { name: 'TotalPrice', type: 'number', required: false, description: 'Total price' },
      { name: 'ListPrice', type: 'number', required: false, description: 'List price (read-only)' },
      { name: 'ServiceDate', type: 'string', required: false, description: 'Service date' },
      { name: 'Description', type: 'string', required: false, description: 'Line item description' },
      { name: 'Discount', type: 'number', required: false, description: 'Discount percentage' },
      { name: 'SortOrder', type: 'integer', required: false, description: 'Sort order' },
      { name: 'ProductCode', type: 'string', required: false, description: 'Product code (read-only)' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'CampaignMember',
    description: 'Salesforce Campaign Member linking contacts/leads to campaigns',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'CampaignId', type: 'string', required: true, description: 'Campaign ID' },
      { name: 'LeadId', type: 'string', required: false, description: 'Lead ID' },
      { name: 'ContactId', type: 'string', required: false, description: 'Contact ID' },
      { name: 'Status', type: 'string', required: false, description: 'Member status', enum_values: ['Sent', 'Responded'] },
      { name: 'HasResponded', type: 'boolean', required: false, description: 'Whether member has responded' },
      { name: 'FirstRespondedDate', type: 'string', required: false, description: 'First responded date' },
      { name: 'LeadSource', type: 'string', required: false, description: 'Lead source (read-only)' },
      { name: 'Name', type: 'string', required: false, description: 'Member name (read-only)' },
      { name: 'Email', type: 'string', required: false, description: 'Email (read-only)' },
      { name: 'Phone', type: 'string', required: false, description: 'Phone (read-only)' },
      { name: 'Title', type: 'string', required: false, description: 'Title (read-only)' },
      { name: 'Company', type: 'string', required: false, description: 'Company (read-only)' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
  {
    service: 'salesforce',
    entity: 'AccountContactRelation',
    description: 'Salesforce Account Contact Relation linking contacts to multiple accounts',
    fields: [
      { name: 'Id', type: 'string', required: true, description: 'Salesforce record ID' },
      { name: 'AccountId', type: 'string', required: true, description: 'Account ID' },
      { name: 'ContactId', type: 'string', required: true, description: 'Contact ID' },
      { name: 'Roles', type: 'string', required: false, description: 'Contact roles' },
      { name: 'IsDirect', type: 'boolean', required: false, description: 'Whether this is the direct account relationship' },
      { name: 'IsActive', type: 'boolean', required: false, description: 'Whether relationship is active' },
      { name: 'StartDate', type: 'string', required: false, description: 'Relationship start date' },
      { name: 'EndDate', type: 'string', required: false, description: 'Relationship end date' },
      { name: 'CreatedDate', type: 'timestamp', required: false, description: 'Record creation date' },
      { name: 'LastModifiedDate', type: 'timestamp', required: false, description: 'Last modification date' },
    ],
  },
];

// Chargebee schemas for target (can also be source in other migrations)
const chargebeeSchemas: EntitySchema[] = [
  {
    service: 'chargebee',
    entity: 'Customer',
    description: 'Chargebee customer representing a subscriber or buyer',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the customer' },
      { name: 'email', type: 'string', required: false, description: 'Email address' },
      { name: 'first_name', type: 'string', required: false, description: 'First name' },
      { name: 'last_name', type: 'string', required: false, description: 'Last name' },
      { name: 'phone', type: 'string', required: false, description: 'Phone number' },
      { name: 'company', type: 'string', required: false, description: 'Company name' },
      { name: 'auto_collection', type: 'string', required: false, description: 'Auto collection setting', enum_values: ['on', 'off'] },
      { name: 'net_term_days', type: 'integer', required: false, description: 'Net term days for invoices' },
      { name: 'allow_direct_debit', type: 'boolean', required: false, description: 'Allow direct debit' },
      { name: 'vat_number', type: 'string', required: false, description: 'VAT number' },
      { name: 'vat_number_validated_time', type: 'timestamp', required: false, description: 'VAT validation timestamp' },
      { name: 'vat_number_status', type: 'string', required: false, description: 'VAT validation status', enum_values: ['valid', 'invalid', 'not_validated', 'undetermined'] },
      { name: 'is_einvoice_enabled', type: 'boolean', required: false, description: 'E-invoice enabled' },
      { name: 'einvoicing_method', type: 'string', required: false, description: 'E-invoicing method', enum_values: ['automatic', 'manual', 'site_default'] },
      { name: 'taxability', type: 'string', required: false, description: 'Taxability status', enum_values: ['taxable', 'exempt'] },
      { name: 'entity_code', type: 'string', required: false, description: 'Entity code for tax' },
      { name: 'exempt_number', type: 'string', required: false, description: 'Tax exemption number' },
      { name: 'locale', type: 'string', required: false, description: 'Customer locale' },
      { name: 'consolidated_invoicing', type: 'boolean', required: false, description: 'Consolidated invoicing enabled' },
      { name: 'billing_date', type: 'integer', required: false, description: 'Billing date of month' },
      { name: 'billing_date_mode', type: 'string', required: false, description: 'Billing date mode', enum_values: ['using_defaults', 'manually_set'] },
      { name: 'billing_day_of_week', type: 'string', required: false, description: 'Billing day of week', enum_values: ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'] },
      { name: 'billing_day_of_week_mode', type: 'string', required: false, description: 'Billing day mode', enum_values: ['using_defaults', 'manually_set'] },
      { name: 'pii_cleared', type: 'string', required: false, description: 'PII cleared status', enum_values: ['active', 'scheduled_for_clear', 'cleared'] },
      { name: 'auto_close_invoices', type: 'boolean', required: false, description: 'Auto close invoices' },
      { name: 'fraud_flag', type: 'string', required: false, description: 'Fraud flag', enum_values: ['safe', 'suspicious', 'fraudulent'] },
      { name: 'primary_payment_source_id', type: 'string', required: false, description: 'Primary payment source ID' },
      { name: 'backup_payment_source_id', type: 'string', required: false, description: 'Backup payment source ID' },
      { name: 'invoice_notes', type: 'string', required: false, description: 'Default invoice notes' },
      { name: 'preferred_currency_code', type: 'string', required: false, description: 'Preferred currency code' },
      { name: 'promotional_credits', type: 'integer', required: false, description: 'Promotional credits balance' },
      { name: 'unbilled_charges', type: 'integer', required: false, description: 'Unbilled charges amount' },
      { name: 'refundable_credits', type: 'integer', required: false, description: 'Refundable credits balance' },
      { name: 'excess_payments', type: 'integer', required: false, description: 'Excess payments amount' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether customer is deleted' },
      { name: 'billing_address', type: 'object', required: false, description: 'Billing address', properties: [
        { name: 'first_name', type: 'string', required: false, description: 'First name' },
        { name: 'last_name', type: 'string', required: false, description: 'Last name' },
        { name: 'email', type: 'string', required: false, description: 'Email' },
        { name: 'company', type: 'string', required: false, description: 'Company' },
        { name: 'phone', type: 'string', required: false, description: 'Phone' },
        { name: 'line1', type: 'string', required: false, description: 'Address line 1' },
        { name: 'line2', type: 'string', required: false, description: 'Address line 2' },
        { name: 'line3', type: 'string', required: false, description: 'Address line 3' },
        { name: 'city', type: 'string', required: false, description: 'City' },
        { name: 'state_code', type: 'string', required: false, description: 'State code' },
        { name: 'state', type: 'string', required: false, description: 'State name' },
        { name: 'zip', type: 'string', required: false, description: 'Postal code' },
        { name: 'country', type: 'string', required: false, description: 'Country code' },
        { name: 'validation_status', type: 'string', required: false, description: 'Address validation status' },
      ]},
      { name: 'referral_urls', type: 'array', required: false, description: 'Referral URLs' },
      { name: 'contacts', type: 'array', required: false, description: 'Customer contacts' },
      { name: 'payment_method', type: 'object', required: false, description: 'Payment method details' },
      { name: 'balances', type: 'array', required: false, description: 'Multi-currency balances' },
      { name: 'relationship', type: 'object', required: false, description: 'Account hierarchy relationship' },
      { name: 'meta_data', type: 'object', required: false, description: 'Custom metadata (max 65535 chars)' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Subscription',
    description: 'Chargebee subscription for recurring billing',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the subscription' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID who owns subscription' },
      { name: 'status', type: 'string', required: true, description: 'Subscription status', enum_values: ['future', 'in_trial', 'active', 'non_renewing', 'paused', 'cancelled'] },
      { name: 'current_term_start', type: 'timestamp', required: false, description: 'Current term start date' },
      { name: 'current_term_end', type: 'timestamp', required: false, description: 'Current term end date' },
      { name: 'next_billing_at', type: 'timestamp', required: false, description: 'Next billing date' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'started_at', type: 'timestamp', required: false, description: 'Subscription start date' },
      { name: 'activated_at', type: 'timestamp', required: false, description: 'Activation timestamp' },
      { name: 'cancelled_at', type: 'timestamp', required: false, description: 'Cancellation timestamp' },
      { name: 'cancel_reason', type: 'string', required: false, description: 'Cancellation reason', enum_values: ['not_paid', 'no_card', 'fraud_review_failed', 'non_compliant_customer', 'tax_calculation_failed', 'currency_incompatible', 'product_not_available'] },
      { name: 'trial_start', type: 'timestamp', required: false, description: 'Trial start date' },
      { name: 'trial_end', type: 'timestamp', required: false, description: 'Trial end date' },
      { name: 'remaining_billing_cycles', type: 'integer', required: false, description: 'Remaining billing cycles' },
      { name: 'po_number', type: 'string', required: false, description: 'Purchase order number' },
      { name: 'auto_collection', type: 'string', required: false, description: 'Auto collection setting', enum_values: ['on', 'off'] },
      { name: 'due_invoices_count', type: 'integer', required: false, description: 'Number of due invoices' },
      { name: 'due_since', type: 'timestamp', required: false, description: 'Due since date' },
      { name: 'total_dues', type: 'integer', required: false, description: 'Total dues amount' },
      { name: 'mrr', type: 'integer', required: false, description: 'Monthly recurring revenue' },
      { name: 'exchange_rate', type: 'number', required: false, description: 'Exchange rate' },
      { name: 'base_currency_code', type: 'string', required: false, description: 'Base currency code' },
      { name: 'invoice_notes', type: 'string', required: false, description: 'Invoice notes' },
      { name: 'has_scheduled_changes', type: 'boolean', required: false, description: 'Has scheduled changes' },
      { name: 'has_scheduled_advance_invoices', type: 'boolean', required: false, description: 'Has scheduled advance invoices' },
      { name: 'create_pending_invoices', type: 'boolean', required: false, description: 'Create pending invoices' },
      { name: 'auto_close_invoices', type: 'boolean', required: false, description: 'Auto close invoices' },
      { name: 'subscription_items', type: 'array', required: false, description: 'Subscription items/plans' },
      { name: 'item_tiers', type: 'array', required: false, description: 'Item tier pricing' },
      { name: 'charged_items', type: 'array', required: false, description: 'Charged items' },
      { name: 'coupons', type: 'array', required: false, description: 'Applied coupons' },
      { name: 'shipping_address', type: 'object', required: false, description: 'Shipping address' },
      { name: 'payment_source_id', type: 'string', required: false, description: 'Payment source ID' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether subscription is deleted' },
      { name: 'meta_data', type: 'object', required: false, description: 'Custom metadata' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Invoice',
    description: 'Chargebee invoice for billing',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the invoice' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
      { name: 'recurring', type: 'boolean', required: false, description: 'Whether invoice is recurring' },
      { name: 'status', type: 'string', required: true, description: 'Invoice status', enum_values: ['paid', 'posted', 'payment_due', 'not_paid', 'voided', 'pending'] },
      { name: 'price_type', type: 'string', required: false, description: 'Price type', enum_values: ['tax_exclusive', 'tax_inclusive'] },
      { name: 'date', type: 'timestamp', required: false, description: 'Invoice date' },
      { name: 'due_date', type: 'timestamp', required: false, description: 'Payment due date' },
      { name: 'net_term_days', type: 'integer', required: false, description: 'Net term days' },
      { name: 'currency_code', type: 'string', required: false, description: 'Currency code' },
      { name: 'total', type: 'integer', required: false, description: 'Total amount in cents' },
      { name: 'amount_paid', type: 'integer', required: false, description: 'Amount paid in cents' },
      { name: 'amount_adjusted', type: 'integer', required: false, description: 'Amount adjusted' },
      { name: 'write_off_amount', type: 'integer', required: false, description: 'Write off amount' },
      { name: 'credits_applied', type: 'integer', required: false, description: 'Credits applied' },
      { name: 'amount_due', type: 'integer', required: false, description: 'Amount due' },
      { name: 'sub_total', type: 'integer', required: false, description: 'Subtotal before tax' },
      { name: 'tax', type: 'integer', required: false, description: 'Tax amount' },
      { name: 'first_invoice', type: 'boolean', required: false, description: 'Is first invoice' },
      { name: 'new_sales_amount', type: 'integer', required: false, description: 'New sales amount' },
      { name: 'has_advance_charges', type: 'boolean', required: false, description: 'Has advance charges' },
      { name: 'round_off_amount', type: 'integer', required: false, description: 'Round off amount' },
      { name: 'paid_at', type: 'timestamp', required: false, description: 'Payment timestamp' },
      { name: 'expected_payment_date', type: 'timestamp', required: false, description: 'Expected payment date' },
      { name: 'dunning_status', type: 'string', required: false, description: 'Dunning status', enum_values: ['in_progress', 'exhausted', 'stopped', 'success'] },
      { name: 'next_retry_at', type: 'timestamp', required: false, description: 'Next retry date' },
      { name: 'voided_at', type: 'timestamp', required: false, description: 'Void timestamp' },
      { name: 'void_reason_code', type: 'string', required: false, description: 'Void reason code' },
      { name: 'generated_at', type: 'timestamp', required: false, description: 'Generation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'line_items', type: 'array', required: false, description: 'Invoice line items' },
      { name: 'discounts', type: 'array', required: false, description: 'Applied discounts' },
      { name: 'line_item_discounts', type: 'array', required: false, description: 'Line item discounts' },
      { name: 'taxes', type: 'array', required: false, description: 'Tax breakdown' },
      { name: 'line_item_taxes', type: 'array', required: false, description: 'Line item taxes' },
      { name: 'line_item_tiers', type: 'array', required: false, description: 'Line item tiers' },
      { name: 'linked_payments', type: 'array', required: false, description: 'Linked payments' },
      { name: 'dunning_attempts', type: 'array', required: false, description: 'Dunning attempts' },
      { name: 'applied_credits', type: 'array', required: false, description: 'Applied credits' },
      { name: 'adjustment_credit_notes', type: 'array', required: false, description: 'Adjustment credit notes' },
      { name: 'issued_credit_notes', type: 'array', required: false, description: 'Issued credit notes' },
      { name: 'linked_orders', type: 'array', required: false, description: 'Linked orders' },
      { name: 'notes', type: 'array', required: false, description: 'Invoice notes' },
      { name: 'shipping_address', type: 'object', required: false, description: 'Shipping address' },
      { name: 'billing_address', type: 'object', required: false, description: 'Billing address' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether invoice is deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Item',
    description: 'Chargebee item (plan/addon/charge) in Product Catalog 2.0',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the item' },
      { name: 'name', type: 'string', required: true, description: 'Item name' },
      { name: 'external_name', type: 'string', required: false, description: 'External/display name' },
      { name: 'description', type: 'string', required: false, description: 'Item description' },
      { name: 'status', type: 'string', required: false, description: 'Item status', enum_values: ['active', 'archived', 'deleted'] },
      { name: 'type', type: 'string', required: true, description: 'Item type', enum_values: ['plan', 'addon', 'charge'] },
      { name: 'item_family_id', type: 'string', required: false, description: 'Item family ID' },
      { name: 'item_applicability', type: 'string', required: false, description: 'Item applicability', enum_values: ['all', 'restricted'] },
      { name: 'applicable_items', type: 'array', required: false, description: 'Applicable item IDs (for addons)' },
      { name: 'is_shippable', type: 'boolean', required: false, description: 'Whether item is shippable' },
      { name: 'is_giftable', type: 'boolean', required: false, description: 'Whether item is giftable' },
      { name: 'enabled_for_checkout', type: 'boolean', required: false, description: 'Enabled for checkout' },
      { name: 'enabled_in_portal', type: 'boolean', required: false, description: 'Enabled in portal' },
      { name: 'redirect_url', type: 'string', required: false, description: 'Redirect URL after checkout' },
      { name: 'included_in_mrr', type: 'boolean', required: false, description: 'Included in MRR calculation' },
      { name: 'metered', type: 'boolean', required: false, description: 'Whether item is metered' },
      { name: 'usage_calculation', type: 'string', required: false, description: 'Usage calculation method', enum_values: ['sum_of_usages', 'last_usage', 'max_usage'] },
      { name: 'archived_at', type: 'timestamp', required: false, description: 'Archive timestamp' },
      { name: 'channel', type: 'string', required: false, description: 'Sales channel', enum_values: ['web', 'app_store', 'play_store'] },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'metadata', type: 'object', required: false, description: 'Custom metadata' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'ItemPrice',
    description: 'Chargebee item price (pricing for items)',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for item price' },
      { name: 'name', type: 'string', required: true, description: 'Item price name' },
      { name: 'item_id', type: 'string', required: true, description: 'Parent item ID' },
      { name: 'external_name', type: 'string', required: false, description: 'External/display name' },
      { name: 'description', type: 'string', required: false, description: 'Description' },
      { name: 'status', type: 'string', required: false, description: 'Status', enum_values: ['active', 'archived', 'deleted'] },
      { name: 'pricing_model', type: 'string', required: true, description: 'Pricing model', enum_values: ['flat_fee', 'per_unit', 'tiered', 'volume', 'stairstep'] },
      { name: 'price', type: 'integer', required: false, description: 'Price in cents' },
      { name: 'price_in_decimal', type: 'string', required: false, description: 'Price with decimal precision' },
      { name: 'period', type: 'integer', required: false, description: 'Billing period count' },
      { name: 'period_unit', type: 'string', required: false, description: 'Billing period unit', enum_values: ['day', 'week', 'month', 'year'] },
      { name: 'currency_code', type: 'string', required: true, description: 'Currency code' },
      { name: 'trial_period', type: 'integer', required: false, description: 'Trial period count' },
      { name: 'trial_period_unit', type: 'string', required: false, description: 'Trial period unit', enum_values: ['day', 'month'] },
      { name: 'trial_end_action', type: 'string', required: false, description: 'Trial end action', enum_values: ['site_default', 'activate_subscription', 'cancel_subscription'] },
      { name: 'shipping_period', type: 'integer', required: false, description: 'Shipping period' },
      { name: 'shipping_period_unit', type: 'string', required: false, description: 'Shipping period unit' },
      { name: 'billing_cycles', type: 'integer', required: false, description: 'Number of billing cycles' },
      { name: 'free_quantity', type: 'integer', required: false, description: 'Free quantity' },
      { name: 'free_quantity_in_decimal', type: 'string', required: false, description: 'Free quantity decimal' },
      { name: 'is_taxable', type: 'boolean', required: false, description: 'Whether taxable' },
      { name: 'tax_detail', type: 'object', required: false, description: 'Tax details' },
      { name: 'accounting_detail', type: 'object', required: false, description: 'Accounting details' },
      { name: 'tiers', type: 'array', required: false, description: 'Pricing tiers' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'archived_at', type: 'timestamp', required: false, description: 'Archive timestamp' },
      { name: 'metadata', type: 'object', required: false, description: 'Custom metadata' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'PaymentSource',
    description: 'Chargebee payment source for customer payments',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for payment source' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'type', type: 'string', required: true, description: 'Payment source type', enum_values: ['card', 'bank_account', 'amazon_payment', 'paypal_express_checkout', 'direct_debit', 'generic', 'alipay', 'unionpay', 'apple_pay', 'wechat_pay', 'ideal', 'google_pay', 'sofort', 'bancontact', 'giropay', 'dotpay', 'upi', 'netbanking_emandates', 'klarna_pay_now', 'online_banking_poland', 'faster_payments', 'sepa_instant_transfer', 'automated_bank_transfer', 'pay_to'] },
      { name: 'reference_id', type: 'string', required: false, description: 'Reference ID from gateway' },
      { name: 'status', type: 'string', required: false, description: 'Payment source status', enum_values: ['valid', 'expiring', 'expired', 'invalid', 'pending_verification'] },
      { name: 'gateway', type: 'string', required: false, description: 'Payment gateway' },
      { name: 'gateway_account_id', type: 'string', required: false, description: 'Gateway account ID' },
      { name: 'ip_address', type: 'string', required: false, description: 'IP address when created' },
      { name: 'issuing_country', type: 'string', required: false, description: 'Issuing country code' },
      { name: 'card', type: 'object', required: false, description: 'Card details', properties: [
        { name: 'first_name', type: 'string', required: false, description: 'Cardholder first name' },
        { name: 'last_name', type: 'string', required: false, description: 'Cardholder last name' },
        { name: 'iin', type: 'string', required: false, description: 'Card IIN' },
        { name: 'last4', type: 'string', required: false, description: 'Last 4 digits' },
        { name: 'brand', type: 'string', required: false, description: 'Card brand', enum_values: ['visa', 'mastercard', 'american_express', 'discover', 'jcb', 'diners_club', 'other', 'not_applicable', 'bancontact', 'cartes_bancaires'] },
        { name: 'funding_type', type: 'string', required: false, description: 'Funding type', enum_values: ['credit', 'debit', 'prepaid', 'not_known', 'not_applicable'] },
        { name: 'expiry_month', type: 'integer', required: false, description: 'Expiry month' },
        { name: 'expiry_year', type: 'integer', required: false, description: 'Expiry year' },
        { name: 'billing_addr1', type: 'string', required: false, description: 'Billing address line 1' },
        { name: 'billing_addr2', type: 'string', required: false, description: 'Billing address line 2' },
        { name: 'billing_city', type: 'string', required: false, description: 'Billing city' },
        { name: 'billing_state_code', type: 'string', required: false, description: 'Billing state code' },
        { name: 'billing_state', type: 'string', required: false, description: 'Billing state' },
        { name: 'billing_country', type: 'string', required: false, description: 'Billing country' },
        { name: 'billing_zip', type: 'string', required: false, description: 'Billing postal code' },
      ]},
      { name: 'bank_account', type: 'object', required: false, description: 'Bank account details' },
      { name: 'amazon_payment', type: 'object', required: false, description: 'Amazon payment details' },
      { name: 'paypal', type: 'object', required: false, description: 'PayPal details' },
      { name: 'mandates', type: 'array', required: false, description: 'Mandates for direct debit' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Coupon',
    description: 'Chargebee coupon for discounts',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for coupon' },
      { name: 'name', type: 'string', required: true, description: 'Coupon name' },
      { name: 'invoice_name', type: 'string', required: false, description: 'Name on invoice' },
      { name: 'discount_type', type: 'string', required: true, description: 'Discount type', enum_values: ['fixed_amount', 'percentage'] },
      { name: 'discount_amount', type: 'integer', required: false, description: 'Fixed discount amount in cents' },
      { name: 'discount_percentage', type: 'number', required: false, description: 'Discount percentage' },
      { name: 'currency_code', type: 'string', required: false, description: 'Currency code' },
      { name: 'duration_type', type: 'string', required: true, description: 'Duration type', enum_values: ['one_time', 'forever', 'limited_period'] },
      { name: 'duration_month', type: 'integer', required: false, description: 'Duration in months' },
      { name: 'valid_till', type: 'timestamp', required: false, description: 'Validity end date' },
      { name: 'max_redemptions', type: 'integer', required: false, description: 'Maximum redemptions' },
      { name: 'status', type: 'string', required: false, description: 'Coupon status', enum_values: ['active', 'expired', 'archived', 'deleted'] },
      { name: 'apply_discount_on', type: 'string', required: false, description: 'Apply discount on', enum_values: ['plans', 'plans_and_addons', 'plans_with_quantity', 'not_applicable'] },
      { name: 'apply_on', type: 'string', required: true, description: 'Apply on', enum_values: ['invoice_amount', 'specified_items_total', 'each_specified_item', 'each_unit_of_specified_items'] },
      { name: 'plan_constraint', type: 'string', required: false, description: 'Plan constraint', enum_values: ['none', 'all', 'specific', 'not_applicable'] },
      { name: 'addon_constraint', type: 'string', required: false, description: 'Addon constraint', enum_values: ['none', 'all', 'specific', 'not_applicable'] },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'archived_at', type: 'timestamp', required: false, description: 'Archive timestamp' },
      { name: 'redemptions', type: 'integer', required: false, description: 'Number of redemptions' },
      { name: 'item_constraints', type: 'array', required: false, description: 'Item constraints' },
      { name: 'item_constraint_criteria', type: 'array', required: false, description: 'Item constraint criteria' },
      { name: 'coupon_constraints', type: 'array', required: false, description: 'Coupon constraints' },
      { name: 'meta_data', type: 'object', required: false, description: 'Custom metadata' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'CreditNote',
    description: 'Chargebee credit note for refunds/credits',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for credit note' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
      { name: 'reference_invoice_id', type: 'string', required: false, description: 'Reference invoice ID' },
      { name: 'type', type: 'string', required: true, description: 'Credit note type', enum_values: ['adjustment', 'refundable'] },
      { name: 'reason_code', type: 'string', required: false, description: 'Reason code', enum_values: ['write_off', 'subscription_change', 'subscription_cancellation', 'subscription_pause', 'chargeback', 'product_unsatisfactory', 'service_unsatisfactory', 'order_change', 'order_cancellation', 'waiver', 'other', 'fraudulent'] },
      { name: 'status', type: 'string', required: true, description: 'Credit note status', enum_values: ['adjusted', 'refunded', 'refund_due', 'voided'] },
      { name: 'date', type: 'timestamp', required: false, description: 'Credit note date' },
      { name: 'price_type', type: 'string', required: false, description: 'Price type', enum_values: ['tax_exclusive', 'tax_inclusive'] },
      { name: 'currency_code', type: 'string', required: true, description: 'Currency code' },
      { name: 'total', type: 'integer', required: false, description: 'Total amount' },
      { name: 'amount_allocated', type: 'integer', required: false, description: 'Amount allocated' },
      { name: 'amount_refunded', type: 'integer', required: false, description: 'Amount refunded' },
      { name: 'amount_available', type: 'integer', required: false, description: 'Amount available' },
      { name: 'refunded_at', type: 'timestamp', required: false, description: 'Refund timestamp' },
      { name: 'voided_at', type: 'timestamp', required: false, description: 'Void timestamp' },
      { name: 'generated_at', type: 'timestamp', required: false, description: 'Generation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Last update timestamp' },
      { name: 'sub_total', type: 'integer', required: false, description: 'Subtotal' },
      { name: 'sub_total_in_local_currency', type: 'integer', required: false, description: 'Subtotal in local currency' },
      { name: 'total_in_local_currency', type: 'integer', required: false, description: 'Total in local currency' },
      { name: 'local_currency_code', type: 'string', required: false, description: 'Local currency code' },
      { name: 'round_off_amount', type: 'integer', required: false, description: 'Round off amount' },
      { name: 'line_items', type: 'array', required: false, description: 'Line items' },
      { name: 'discounts', type: 'array', required: false, description: 'Applied discounts' },
      { name: 'line_item_discounts', type: 'array', required: false, description: 'Line item discounts' },
      { name: 'line_item_tiers', type: 'array', required: false, description: 'Line item tiers' },
      { name: 'taxes', type: 'array', required: false, description: 'Taxes' },
      { name: 'line_item_taxes', type: 'array', required: false, description: 'Line item taxes' },
      { name: 'linked_refunds', type: 'array', required: false, description: 'Linked refunds' },
      { name: 'allocations', type: 'array', required: false, description: 'Allocations' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Transaction',
    description: 'Chargebee transaction representing payments, refunds, and payment reversals',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the transaction' },
      { name: 'customer_id', type: 'string', required: false, description: 'Customer ID' },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
      { name: 'gateway_account_id', type: 'string', required: false, description: 'Gateway account ID' },
      { name: 'payment_source_id', type: 'string', required: false, description: 'Payment source ID' },
      { name: 'payment_method', type: 'string', required: true, description: 'Payment method type', enum_values: ['card', 'cash', 'check', 'chargeback', 'bank_transfer', 'amazon_payments', 'paypal_express_checkout', 'direct_debit', 'alipay', 'unionpay', 'apple_pay', 'wechat_pay', 'ach_credit', 'sepa_credit', 'ideal', 'google_pay', 'sofort', 'bancontact', 'giropay', 'dotpay', 'upi', 'netbanking_emandates', 'custom', 'boleto', 'venmo', 'pay_to', 'faster_payments', 'sepa_instant_transfer', 'automated_bank_transfer', 'klarna_pay_now', 'online_banking_poland'] },
      { name: 'reference_number', type: 'string', required: false, description: 'Reference number from gateway' },
      { name: 'gateway', type: 'string', required: false, description: 'Payment gateway used' },
      { name: 'type', type: 'string', required: true, description: 'Transaction type', enum_values: ['authorization', 'payment', 'refund', 'payment_reversal'] },
      { name: 'date', type: 'timestamp', required: false, description: 'Transaction date' },
      { name: 'settled_at', type: 'timestamp', required: false, description: 'Settlement timestamp' },
      { name: 'exchange_rate', type: 'number', required: false, description: 'Exchange rate' },
      { name: 'currency_code', type: 'string', required: true, description: 'Currency code' },
      { name: 'amount', type: 'integer', required: true, description: 'Transaction amount in cents' },
      { name: 'id_at_gateway', type: 'string', required: false, description: 'ID at the payment gateway' },
      { name: 'status', type: 'string', required: true, description: 'Transaction status', enum_values: ['in_progress', 'success', 'voided', 'failure', 'timeout', 'needs_attention'] },
      { name: 'fraud_flag', type: 'string', required: false, description: 'Fraud flag', enum_values: ['safe', 'suspicious', 'fraudulent'] },
      { name: 'initiator_type', type: 'string', required: false, description: 'Who initiated the transaction', enum_values: ['customer', 'merchant'] },
      { name: 'three_d_secure', type: 'boolean', required: false, description: '3D Secure used' },
      { name: 'authorization_reason', type: 'string', required: false, description: 'Authorization reason', enum_values: ['blocking_funds', 'verification'] },
      { name: 'error_code', type: 'string', required: false, description: 'Error code if failed' },
      { name: 'error_text', type: 'string', required: false, description: 'Error message if failed' },
      { name: 'voided_at', type: 'timestamp', required: false, description: 'Void timestamp' },
      { name: 'void_description', type: 'string', required: false, description: 'Void description' },
      { name: 'amount_unused', type: 'integer', required: false, description: 'Unused amount' },
      { name: 'masked_card_number', type: 'string', required: false, description: 'Masked card number' },
      { name: 'reference_transaction_id', type: 'string', required: false, description: 'Reference transaction ID' },
      { name: 'refunded_txn_id', type: 'string', required: false, description: 'Refunded transaction ID' },
      { name: 'reference_authorization_id', type: 'string', required: false, description: 'Reference authorization ID' },
      { name: 'amount_capturable', type: 'integer', required: false, description: 'Amount capturable' },
      { name: 'reversal_transaction_id', type: 'string', required: false, description: 'Reversal transaction ID' },
      { name: 'linked_invoices', type: 'array', required: false, description: 'Linked invoice IDs' },
      { name: 'linked_credit_notes', type: 'array', required: false, description: 'Linked credit note IDs' },
      { name: 'linked_refunds', type: 'array', required: false, description: 'Linked refund IDs' },
      { name: 'linked_payments', type: 'array', required: false, description: 'Linked payments' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Order',
    description: 'Chargebee order for physical goods or one-time purchases',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the order' },
      { name: 'document_number', type: 'string', required: false, description: 'Document number' },
      { name: 'invoice_id', type: 'string', required: false, description: 'Associated invoice ID' },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
      { name: 'customer_id', type: 'string', required: false, description: 'Customer ID' },
      { name: 'status', type: 'string', required: true, description: 'Order status', enum_values: ['new', 'processing', 'complete', 'cancelled', 'voided', 'queued', 'awaiting_shipment', 'on_hold', 'delivered', 'shipped', 'partially_delivered', 'returned'] },
      { name: 'cancellation_reason', type: 'string', required: false, description: 'Cancellation reason', enum_values: ['shipping_cut_off_passed', 'product_unsatisfactory', 'third_party_cancellation', 'product_not_required', 'delivery_date_missed', 'alternative_found', 'invoice_written_off', 'invoice_voided', 'fraudulent_transaction', 'payment_declined', 'subscription_cancelled', 'product_not_available', 'others', 'order_resent'] },
      { name: 'payment_status', type: 'string', required: false, description: 'Payment status', enum_values: ['not_paid', 'paid'] },
      { name: 'order_type', type: 'string', required: false, description: 'Order type', enum_values: ['manual', 'system_generated'] },
      { name: 'price_type', type: 'string', required: false, description: 'Price type', enum_values: ['tax_exclusive', 'tax_inclusive'] },
      { name: 'reference_id', type: 'string', required: false, description: 'External reference ID' },
      { name: 'fulfillment_status', type: 'string', required: false, description: 'Fulfillment status' },
      { name: 'order_date', type: 'timestamp', required: false, description: 'Order date' },
      { name: 'shipping_date', type: 'timestamp', required: false, description: 'Shipping date' },
      { name: 'note', type: 'string', required: false, description: 'Order note' },
      { name: 'tracking_id', type: 'string', required: false, description: 'Tracking ID' },
      { name: 'tracking_url', type: 'string', required: false, description: 'Tracking URL' },
      { name: 'batch_id', type: 'string', required: false, description: 'Batch ID' },
      { name: 'created_by', type: 'string', required: false, description: 'Created by user' },
      { name: 'shipment_carrier', type: 'string', required: false, description: 'Shipment carrier' },
      { name: 'invoice_round_off_amount', type: 'integer', required: false, description: 'Invoice round off amount' },
      { name: 'tax', type: 'integer', required: false, description: 'Tax amount' },
      { name: 'amount_paid', type: 'integer', required: false, description: 'Amount paid' },
      { name: 'amount_adjusted', type: 'integer', required: false, description: 'Amount adjusted' },
      { name: 'refundable_credits_issued', type: 'integer', required: false, description: 'Refundable credits issued' },
      { name: 'refundable_credits', type: 'integer', required: false, description: 'Refundable credits' },
      { name: 'rounding_adjustement', type: 'integer', required: false, description: 'Rounding adjustment' },
      { name: 'paid_on', type: 'timestamp', required: false, description: 'Payment date' },
      { name: 'shipping_cut_off_date', type: 'timestamp', required: false, description: 'Shipping cut-off date' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Update timestamp' },
      { name: 'status_update_at', type: 'timestamp', required: false, description: 'Status update timestamp' },
      { name: 'delivered_at', type: 'timestamp', required: false, description: 'Delivery timestamp' },
      { name: 'shipped_at', type: 'timestamp', required: false, description: 'Shipment timestamp' },
      { name: 'cancelled_at', type: 'timestamp', required: false, description: 'Cancellation timestamp' },
      { name: 'voided_at', type: 'timestamp', required: false, description: 'Void timestamp' },
      { name: 'resent_status', type: 'string', required: false, description: 'Resent status', enum_values: ['fully_resent', 'partially_resent'] },
      { name: 'is_resent', type: 'boolean', required: false, description: 'Whether order is resent' },
      { name: 'original_order_id', type: 'string', required: false, description: 'Original order ID if resent' },
      { name: 'order_line_items', type: 'array', required: false, description: 'Order line items' },
      { name: 'shipping_address', type: 'object', required: false, description: 'Shipping address' },
      { name: 'billing_address', type: 'object', required: false, description: 'Billing address' },
      { name: 'discount', type: 'integer', required: false, description: 'Discount amount' },
      { name: 'sub_total', type: 'integer', required: false, description: 'Subtotal' },
      { name: 'total', type: 'integer', required: false, description: 'Total amount' },
      { name: 'line_item_taxes', type: 'array', required: false, description: 'Line item taxes' },
      { name: 'line_item_discounts', type: 'array', required: false, description: 'Line item discounts' },
      { name: 'linked_credit_notes', type: 'array', required: false, description: 'Linked credit notes' },
      { name: 'resent_orders', type: 'array', required: false, description: 'Resent orders' },
      { name: 'is_gifted', type: 'boolean', required: false, description: 'Whether order is gifted' },
      { name: 'gift_note', type: 'string', required: false, description: 'Gift note' },
      { name: 'gift_id', type: 'string', required: false, description: 'Gift ID' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Quote',
    description: 'Chargebee quote for proposals and estimates',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the quote' },
      { name: 'name', type: 'string', required: false, description: 'Quote name' },
      { name: 'po_number', type: 'string', required: false, description: 'Purchase order number' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
      { name: 'invoice_id', type: 'string', required: false, description: 'Generated invoice ID' },
      { name: 'status', type: 'string', required: true, description: 'Quote status', enum_values: ['open', 'accepted', 'declined', 'invoiced', 'closed'] },
      { name: 'operation_type', type: 'string', required: true, description: 'Operation type', enum_values: ['create_subscription_for_customer', 'change_subscription', 'onetime_invoice'] },
      { name: 'vat_number', type: 'string', required: false, description: 'VAT number' },
      { name: 'price_type', type: 'string', required: false, description: 'Price type', enum_values: ['tax_exclusive', 'tax_inclusive'] },
      { name: 'valid_till', type: 'timestamp', required: false, description: 'Valid until date' },
      { name: 'date', type: 'timestamp', required: false, description: 'Quote date' },
      { name: 'total_payable', type: 'integer', required: false, description: 'Total payable amount' },
      { name: 'charge_on_acceptance', type: 'integer', required: false, description: 'Charge on acceptance' },
      { name: 'sub_total', type: 'integer', required: false, description: 'Subtotal' },
      { name: 'total', type: 'integer', required: false, description: 'Total amount' },
      { name: 'credits_applied', type: 'integer', required: false, description: 'Credits applied' },
      { name: 'amount_paid', type: 'integer', required: false, description: 'Amount paid' },
      { name: 'amount_due', type: 'integer', required: false, description: 'Amount due' },
      { name: 'version', type: 'integer', required: false, description: 'Quote version' },
      { name: 'currency_code', type: 'string', required: true, description: 'Currency code' },
      { name: 'notes', type: 'array', required: false, description: 'Quote notes' },
      { name: 'contract_term_start', type: 'timestamp', required: false, description: 'Contract term start' },
      { name: 'contract_term_end', type: 'timestamp', required: false, description: 'Contract term end' },
      { name: 'contract_term_termination_fee', type: 'integer', required: false, description: 'Termination fee' },
      { name: 'billing_address', type: 'object', required: false, description: 'Billing address' },
      { name: 'shipping_address', type: 'object', required: false, description: 'Shipping address' },
      { name: 'line_items', type: 'array', required: false, description: 'Line items' },
      { name: 'discounts', type: 'array', required: false, description: 'Applied discounts' },
      { name: 'line_item_discounts', type: 'array', required: false, description: 'Line item discounts' },
      { name: 'taxes', type: 'array', required: false, description: 'Taxes' },
      { name: 'line_item_taxes', type: 'array', required: false, description: 'Line item taxes' },
      { name: 'line_item_tiers', type: 'array', required: false, description: 'Line item tiers' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Update timestamp' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Gift',
    description: 'Chargebee gift subscription',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the gift' },
      { name: 'status', type: 'string', required: true, description: 'Gift status', enum_values: ['scheduled', 'unclaimed', 'claimed', 'cancelled', 'expired'] },
      { name: 'scheduled_at', type: 'timestamp', required: false, description: 'Scheduled send date' },
      { name: 'auto_claim', type: 'boolean', required: false, description: 'Auto claim enabled' },
      { name: 'no_expiry', type: 'boolean', required: false, description: 'No expiry date' },
      { name: 'claim_expiry_date', type: 'timestamp', required: false, description: 'Claim expiry date' },
      { name: 'gift_receiver', type: 'object', required: false, description: 'Gift receiver details', properties: [
        { name: 'customer_id', type: 'string', required: false, description: 'Receiver customer ID' },
        { name: 'subscription_id', type: 'string', required: false, description: 'Receiver subscription ID' },
        { name: 'first_name', type: 'string', required: false, description: 'Receiver first name' },
        { name: 'last_name', type: 'string', required: false, description: 'Receiver last name' },
        { name: 'email', type: 'string', required: false, description: 'Receiver email' },
      ]},
      { name: 'gifter', type: 'object', required: false, description: 'Gifter details', properties: [
        { name: 'customer_id', type: 'string', required: false, description: 'Gifter customer ID' },
        { name: 'invoice_id', type: 'string', required: false, description: 'Invoice ID' },
        { name: 'signature', type: 'string', required: false, description: 'Gifter signature' },
        { name: 'note', type: 'string', required: false, description: 'Gift note' },
      ]},
      { name: 'gift_timelines', type: 'array', required: false, description: 'Gift timeline events' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'ItemFamily',
    description: 'Chargebee item family for grouping items',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for item family' },
      { name: 'name', type: 'string', required: true, description: 'Item family name' },
      { name: 'description', type: 'string', required: false, description: 'Description' },
      { name: 'status', type: 'string', required: false, description: 'Status', enum_values: ['active', 'deleted'] },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Update timestamp' },
      { name: 'channel', type: 'string', required: false, description: 'Sales channel', enum_values: ['web', 'app_store', 'play_store'] },
    ],
  },
  {
    service: 'chargebee',
    entity: 'UnbilledCharge',
    description: 'Chargebee unbilled charge pending invoicing',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for unbilled charge' },
      { name: 'customer_id', type: 'string', required: false, description: 'Customer ID' },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
      { name: 'date_from', type: 'timestamp', required: false, description: 'Charge period start' },
      { name: 'date_to', type: 'timestamp', required: false, description: 'Charge period end' },
      { name: 'unit_amount', type: 'integer', required: false, description: 'Unit amount in cents' },
      { name: 'pricing_model', type: 'string', required: false, description: 'Pricing model', enum_values: ['flat_fee', 'per_unit', 'tiered', 'volume', 'stairstep'] },
      { name: 'quantity', type: 'integer', required: false, description: 'Quantity' },
      { name: 'amount', type: 'integer', required: false, description: 'Total amount in cents' },
      { name: 'currency_code', type: 'string', required: true, description: 'Currency code' },
      { name: 'discount_amount', type: 'integer', required: false, description: 'Discount amount' },
      { name: 'description', type: 'string', required: false, description: 'Charge description' },
      { name: 'entity_type', type: 'string', required: true, description: 'Entity type', enum_values: ['adhoc', 'plan_item_price', 'addon_item_price', 'charge_item_price'] },
      { name: 'entity_id', type: 'string', required: false, description: 'Entity ID' },
      { name: 'is_voided', type: 'boolean', required: false, description: 'Whether charge is voided' },
      { name: 'voided_at', type: 'timestamp', required: false, description: 'Void timestamp' },
      { name: 'unit_amount_in_decimal', type: 'string', required: false, description: 'Unit amount decimal' },
      { name: 'quantity_in_decimal', type: 'string', required: false, description: 'Quantity decimal' },
      { name: 'amount_in_decimal', type: 'string', required: false, description: 'Amount decimal' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Update timestamp' },
      { name: 'tiers', type: 'array', required: false, description: 'Pricing tiers' },
      { name: 'is_advance_charge', type: 'boolean', required: false, description: 'Whether advance charge' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'PromotionalCredit',
    description: 'Chargebee promotional credit for customer accounts',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for promotional credit' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'type', type: 'string', required: true, description: 'Credit type', enum_values: ['increment', 'decrement'] },
      { name: 'amount', type: 'integer', required: true, description: 'Credit amount in cents' },
      { name: 'amount_in_decimal', type: 'string', required: false, description: 'Amount decimal' },
      { name: 'currency_code', type: 'string', required: true, description: 'Currency code' },
      { name: 'description', type: 'string', required: false, description: 'Credit description' },
      { name: 'credit_type', type: 'string', required: false, description: 'Credit category', enum_values: ['loyalty_credits', 'referral_rewards', 'general'] },
      { name: 'reference', type: 'string', required: false, description: 'Reference' },
      { name: 'closing_balance', type: 'integer', required: false, description: 'Closing balance' },
      { name: 'done_by', type: 'string', required: false, description: 'Done by user' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Address',
    description: 'Chargebee address for customers',
    fields: [
      { name: 'label', type: 'string', required: true, description: 'Address label' },
      { name: 'first_name', type: 'string', required: false, description: 'First name' },
      { name: 'last_name', type: 'string', required: false, description: 'Last name' },
      { name: 'email', type: 'string', required: false, description: 'Email' },
      { name: 'company', type: 'string', required: false, description: 'Company' },
      { name: 'phone', type: 'string', required: false, description: 'Phone' },
      { name: 'addr', type: 'string', required: false, description: 'Address (deprecated)' },
      { name: 'extended_addr', type: 'string', required: false, description: 'Extended address (deprecated)' },
      { name: 'extended_addr2', type: 'string', required: false, description: 'Extended address 2' },
      { name: 'city', type: 'string', required: false, description: 'City' },
      { name: 'state_code', type: 'string', required: false, description: 'State code' },
      { name: 'state', type: 'string', required: false, description: 'State' },
      { name: 'country', type: 'string', required: false, description: 'Country code' },
      { name: 'zip', type: 'string', required: false, description: 'Postal/ZIP code' },
      { name: 'validation_status', type: 'string', required: false, description: 'Validation status', enum_values: ['not_validated', 'valid', 'partially_valid', 'invalid'] },
      { name: 'subscription_id', type: 'string', required: false, description: 'Subscription ID' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Event',
    description: 'Chargebee webhook event',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for the event' },
      { name: 'occurred_at', type: 'timestamp', required: true, description: 'Event occurrence timestamp' },
      { name: 'source', type: 'string', required: true, description: 'Event source', enum_values: ['admin_console', 'api', 'bulk_operation', 'scheduled_job', 'hosted_page', 'portal', 'system', 'none', 'js_api', 'migration', 'external_service'] },
      { name: 'user', type: 'string', required: false, description: 'User who triggered the event' },
      { name: 'event_type', type: 'string', required: true, description: 'Type of event' },
      { name: 'api_version', type: 'string', required: false, description: 'API version' },
      { name: 'content', type: 'object', required: false, description: 'Event content/payload' },
      { name: 'webhooks', type: 'array', required: false, description: 'Webhook delivery details' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Comment',
    description: 'Chargebee comment on entities',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for comment' },
      { name: 'entity_type', type: 'string', required: true, description: 'Entity type', enum_values: ['customer', 'subscription', 'invoice', 'quote', 'credit_note', 'transaction', 'plan', 'addon', 'coupon', 'order', 'business_entity'] },
      { name: 'added_by', type: 'string', required: false, description: 'Added by user' },
      { name: 'notes', type: 'string', required: true, description: 'Comment text' },
      { name: 'created_at', type: 'timestamp', required: true, description: 'Creation timestamp' },
      { name: 'type', type: 'string', required: true, description: 'Comment type', enum_values: ['user', 'system'] },
      { name: 'entity_id', type: 'string', required: true, description: 'Entity ID the comment belongs to' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'PortalSession',
    description: 'Chargebee customer portal session',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for portal session' },
      { name: 'token', type: 'string', required: true, description: 'Session token' },
      { name: 'access_url', type: 'string', required: true, description: 'Portal access URL' },
      { name: 'redirect_url', type: 'string', required: false, description: 'Redirect URL after logout' },
      { name: 'status', type: 'string', required: true, description: 'Session status', enum_values: ['created', 'logged_in', 'logged_out', 'not_yet_activated', 'activated'] },
      { name: 'created_at', type: 'timestamp', required: true, description: 'Creation timestamp' },
      { name: 'expires_at', type: 'timestamp', required: true, description: 'Expiration timestamp' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'login_at', type: 'timestamp', required: false, description: 'Login timestamp' },
      { name: 'logout_at', type: 'timestamp', required: false, description: 'Logout timestamp' },
      { name: 'login_ipaddress', type: 'string', required: false, description: 'Login IP address' },
      { name: 'logout_ipaddress', type: 'string', required: false, description: 'Logout IP address' },
      { name: 'linked_customers', type: 'array', required: false, description: 'Linked customer accounts' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'HostedPage',
    description: 'Chargebee hosted checkout page',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for hosted page' },
      { name: 'type', type: 'string', required: true, description: 'Page type', enum_values: ['checkout_new', 'checkout_existing', 'checkout_one_time', 'checkout_gift', 'update_payment_method', 'manage_payment_sources', 'collect_now', 'extend_subscription', 'pre_cancel', 'view_voucher', 'checkout_existing_for_items'] },
      { name: 'url', type: 'string', required: true, description: 'Hosted page URL' },
      { name: 'state', type: 'string', required: true, description: 'Page state', enum_values: ['created', 'requested', 'succeeded', 'cancelled', 'acknowledged'] },
      { name: 'failure_reason', type: 'string', required: false, description: 'Failure reason', enum_values: ['card_error', 'server_error'] },
      { name: 'pass_thru_content', type: 'string', required: false, description: 'Pass-through content' },
      { name: 'embed', type: 'boolean', required: false, description: 'Whether page is embedded' },
      { name: 'created_at', type: 'timestamp', required: true, description: 'Creation timestamp' },
      { name: 'expires_at', type: 'timestamp', required: true, description: 'Expiration timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Update timestamp' },
      { name: 'content', type: 'object', required: false, description: 'Page content/result data' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Discount',
    description: 'Chargebee subscription discount',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for discount' },
      { name: 'invoice_name', type: 'string', required: false, description: 'Name on invoice' },
      { name: 'type', type: 'string', required: true, description: 'Discount type', enum_values: ['fixed_amount', 'percentage'] },
      { name: 'percentage', type: 'number', required: false, description: 'Discount percentage' },
      { name: 'amount', type: 'integer', required: false, description: 'Fixed discount amount' },
      { name: 'currency_code', type: 'string', required: false, description: 'Currency code' },
      { name: 'duration_type', type: 'string', required: true, description: 'Duration type', enum_values: ['one_time', 'forever', 'limited_period'] },
      { name: 'period', type: 'integer', required: false, description: 'Period count' },
      { name: 'period_unit', type: 'string', required: false, description: 'Period unit', enum_values: ['day', 'week', 'month', 'year'] },
      { name: 'included_in_mrr', type: 'boolean', required: false, description: 'Included in MRR' },
      { name: 'apply_on', type: 'string', required: true, description: 'Apply on', enum_values: ['invoice_amount', 'specific_item_price'] },
      { name: 'item_price_id', type: 'string', required: false, description: 'Item price ID if specific' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'ContractTerm',
    description: 'Chargebee contract term for subscriptions',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for contract term' },
      { name: 'status', type: 'string', required: true, description: 'Contract status', enum_values: ['active', 'completed', 'cancelled', 'terminated'] },
      { name: 'contract_start', type: 'timestamp', required: true, description: 'Contract start date' },
      { name: 'contract_end', type: 'timestamp', required: true, description: 'Contract end date' },
      { name: 'billing_cycle', type: 'integer', required: false, description: 'Current billing cycle' },
      { name: 'action_at_term_end', type: 'string', required: true, description: 'Action at term end', enum_values: ['renew', 'evergreen', 'cancel', 'renew_once'] },
      { name: 'total_contract_value', type: 'integer', required: false, description: 'Total contract value' },
      { name: 'total_contract_value_before_tax', type: 'integer', required: false, description: 'Total value before tax' },
      { name: 'cancellation_cutoff_period', type: 'integer', required: false, description: 'Cancellation cutoff period in days' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'subscription_id', type: 'string', required: true, description: 'Subscription ID' },
      { name: 'remaining_billing_cycles', type: 'integer', required: false, description: 'Remaining billing cycles' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'VirtualBankAccount',
    description: 'Chargebee virtual bank account for payments',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for virtual bank account' },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'email', type: 'string', required: false, description: 'Email address' },
      { name: 'scheme', type: 'string', required: true, description: 'Bank account scheme', enum_values: ['ach_credit', 'sepa_credit'] },
      { name: 'bank_name', type: 'string', required: false, description: 'Bank name' },
      { name: 'account_number', type: 'string', required: true, description: 'Account number' },
      { name: 'routing_number', type: 'string', required: false, description: 'Routing number' },
      { name: 'swift_code', type: 'string', required: false, description: 'SWIFT code' },
      { name: 'gateway', type: 'string', required: true, description: 'Payment gateway' },
      { name: 'gateway_account_id', type: 'string', required: false, description: 'Gateway account ID' },
      { name: 'reference_id', type: 'string', required: false, description: 'Reference ID' },
      { name: 'deleted', type: 'boolean', required: false, description: 'Whether deleted' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Card',
    description: 'Chargebee card payment method',
    fields: [
      { name: 'payment_source_id', type: 'string', required: true, description: 'Payment source ID' },
      { name: 'status', type: 'string', required: true, description: 'Card status', enum_values: ['valid', 'expiring', 'expired'] },
      { name: 'gateway', type: 'string', required: true, description: 'Payment gateway' },
      { name: 'gateway_account_id', type: 'string', required: false, description: 'Gateway account ID' },
      { name: 'ref_tx_id', type: 'string', required: false, description: 'Reference transaction ID' },
      { name: 'first_name', type: 'string', required: false, description: 'Cardholder first name' },
      { name: 'last_name', type: 'string', required: false, description: 'Cardholder last name' },
      { name: 'iin', type: 'string', required: false, description: 'Issuer identification number' },
      { name: 'last4', type: 'string', required: true, description: 'Last 4 digits' },
      { name: 'card_type', type: 'string', required: false, description: 'Card type', enum_values: ['visa', 'mastercard', 'american_express', 'discover', 'jcb', 'diners_club', 'other', 'bancontact', 'cmi', 'unionpay', 'cartes_bancaires'] },
      { name: 'funding_type', type: 'string', required: false, description: 'Funding type', enum_values: ['credit', 'debit', 'prepaid', 'not_known'] },
      { name: 'expiry_month', type: 'integer', required: true, description: 'Expiry month' },
      { name: 'expiry_year', type: 'integer', required: true, description: 'Expiry year' },
      { name: 'issuing_country', type: 'string', required: false, description: 'Issuing country' },
      { name: 'billing_addr1', type: 'string', required: false, description: 'Billing address line 1' },
      { name: 'billing_addr2', type: 'string', required: false, description: 'Billing address line 2' },
      { name: 'billing_city', type: 'string', required: false, description: 'Billing city' },
      { name: 'billing_state_code', type: 'string', required: false, description: 'Billing state code' },
      { name: 'billing_state', type: 'string', required: false, description: 'Billing state' },
      { name: 'billing_country', type: 'string', required: false, description: 'Billing country' },
      { name: 'billing_zip', type: 'string', required: false, description: 'Billing postal code' },
      { name: 'created_at', type: 'timestamp', required: false, description: 'Creation timestamp' },
      { name: 'ip_address', type: 'string', required: false, description: 'IP address' },
      { name: 'powered_by', type: 'string', required: false, description: 'Powered by gateway', enum_values: ['ideal', 'sofort', 'bancontact', 'giropay', 'card', 'latam_local_card', 'not_applicable'] },
      { name: 'customer_id', type: 'string', required: true, description: 'Customer ID' },
      { name: 'masked_number', type: 'string', required: false, description: 'Masked card number' },
    ],
  },
  {
    service: 'chargebee',
    entity: 'Usage',
    description: 'Chargebee usage record for metered billing',
    fields: [
      { name: 'id', type: 'string', required: true, description: 'Unique identifier for usage record' },
      { name: 'usage_date', type: 'timestamp', required: true, description: 'Usage date' },
      { name: 'subscription_id', type: 'string', required: true, description: 'Subscription ID' },
      { name: 'item_price_id', type: 'string', required: true, description: 'Item price ID' },
      { name: 'invoice_id', type: 'string', required: false, description: 'Invoice ID if billed' },
      { name: 'line_item_id', type: 'string', required: false, description: 'Line item ID' },
      { name: 'quantity', type: 'string', required: true, description: 'Usage quantity' },
      { name: 'source', type: 'string', required: true, description: 'Usage source', enum_values: ['admin_console', 'api', 'bulk_operation'] },
      { name: 'note', type: 'string', required: false, description: 'Usage note' },
      { name: 'created_at', type: 'timestamp', required: true, description: 'Creation timestamp' },
      { name: 'updated_at', type: 'timestamp', required: false, description: 'Update timestamp' },
    ],
  },
];

const seedTargetSchema: EntitySchema = chargebeeSchemas[0]; // Default to Customer

// All available schemas combined (for schema picker)
const allAvailableSchemas: EntitySchema[] = [
  ...seedSourceSchemas,
  ...chargebeeSchemas,
];

const seedSources: DataSource[] = [
  {
    type: 'api',
    name: 'Stripe Customers',
    service: 'stripe',
    entity: 'Customer',
    api_key: '',
    api_endpoint: 'https://api.stripe.com/v1',
    batch_size: 100,
    rate_limit: 25,
    filters: {},
  },
  {
    type: 'api',
    name: 'Stripe Subscriptions',
    service: 'stripe',
    entity: 'Subscription',
    api_key: '',
    api_endpoint: 'https://api.stripe.com/v1',
    batch_size: 100,
    rate_limit: 25,
    filters: {},
  },
  {
    type: 'api',
    name: 'Salesforce Contacts',
    service: 'salesforce',
    entity: 'Contact',
    api_key: '',
    api_endpoint: '',
    batch_size: 200,
    rate_limit: 100,
    filters: {},
  },
];

const seedEntityMappings: EntityMapping[] = [
  // ============================================================================
  // MAPPING 1: Multi-source Customer mapping (many:1)
  // Stripe Customer + Salesforce Contact -> Chargebee Customer
  // Joined on email field - combines billing data from Stripe with CRM data from Salesforce
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Customer',
    target_service: 'chargebee',
    target_entity: 'Customer',
    cardinality: 'many:1',
    additional_sources: [
      { service: 'salesforce', entity: 'Contact', join_key: 'Email' },
    ],
    join_config: {
      type: 'left',
      primary_source: { service: 'stripe', entity: 'Customer' },
      join_conditions: [
        {
          left_source: { service: 'stripe', entity: 'Customer' },
          left_field: 'email',
          right_source: { service: 'salesforce', entity: 'Contact' },
          right_field: 'Email',
        },
      ],
    },
    field_mappings: [
      // === Primary identifiers ===
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' }, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'Id', target_field: 'meta_data.salesforce_id', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },

      // === Contact information ===
      { source_field: 'email', target_field: 'email', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'FirstName', target_field: 'first_name', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'LastName', target_field: 'last_name', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'name', target_field: 'first_name', transform: 'split_name', config: { part: 'first', fallback: true }, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'name', target_field: 'last_name', transform: 'split_name', config: { part: 'last', fallback: true }, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'phone', target_field: 'phone', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'MobilePhone', target_field: 'phone', transform: 'direct', config: { fallback: true }, source_service: 'salesforce', source_entity: 'Contact' },

      // === Billing address from Stripe ===
      { source_field: 'address.line1', target_field: 'billing_address.line1', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'address.line2', target_field: 'billing_address.line2', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'address.city', target_field: 'billing_address.city', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'address.state', target_field: 'billing_address.state', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'address.postal_code', target_field: 'billing_address.zip', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'address.country', target_field: 'billing_address.country', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },

      // === Billing settings ===
      { source_field: 'currency', target_field: 'preferred_currency_code', transform: 'uppercase', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'balance', target_field: 'excess_payments', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'tax_exempt', target_field: 'taxability', transform: 'map_value', config: { mapping: { 'none': 'taxable', 'exempt': 'exempt', 'reverse': 'exempt' } }, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'delinquent', target_field: 'auto_collection', transform: 'map_value', config: { mapping: { true: 'off', false: 'on' } }, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'preferred_locales', target_field: 'locale', transform: 'array_first', config: {}, source_service: 'stripe', source_entity: 'Customer' },
      { source_field: 'created', target_field: 'created_at', transform: 'unix_to_timestamp', config: {}, source_service: 'stripe', source_entity: 'Customer' },

      // === Salesforce enrichment ===
      { source_field: 'Title', target_field: 'meta_data.job_title', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'Department', target_field: 'meta_data.department', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'AccountId', target_field: 'meta_data.salesforce_account_id', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'LeadSource', target_field: 'meta_data.lead_source', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'HasOptedOutOfEmail', target_field: 'meta_data.email_opt_out', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'metadata', target_field: 'meta_data.stripe_metadata', transform: 'direct', config: {}, source_service: 'stripe', source_entity: 'Customer' },
    ],
  },

  // ============================================================================
  // MAPPING 2: Stripe Subscription -> Chargebee Subscription (1:1)
  // Direct mapping with status transformation
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Subscription',
    target_service: 'chargebee',
    target_entity: 'Subscription',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'customer', target_field: 'customer_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'status', target_field: 'status', transform: 'map_value', config: {
        mapping: {
          'active': 'active',
          'trialing': 'in_trial',
          'past_due': 'active',
          'canceled': 'cancelled',
          'unpaid': 'active',
          'incomplete': 'future',
          'incomplete_expired': 'cancelled',
          'paused': 'paused'
        }
      }},
      { source_field: 'current_period_start', target_field: 'current_term_start', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'current_period_end', target_field: 'current_term_end', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'billing_cycle_anchor', target_field: 'next_billing_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'created', target_field: 'created_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'start_date', target_field: 'started_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'trial_start', target_field: 'trial_start', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'trial_end', target_field: 'trial_end', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'canceled_at', target_field: 'cancelled_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'cancel_at_period_end', target_field: 'cancel_at_term_end', transform: 'direct', config: {} },
      { source_field: 'collection_method', target_field: 'auto_collection', transform: 'map_value', config: { mapping: { 'charge_automatically': 'on', 'send_invoice': 'off' } } },
      { source_field: 'currency', target_field: 'currency_code', transform: 'uppercase', config: {} },
      { source_field: 'description', target_field: 'meta_data.description', transform: 'direct', config: {} },
      { source_field: 'metadata', target_field: 'meta_data', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 3: Stripe Invoice -> Chargebee Invoice (1:1)
  // Comprehensive invoice data migration
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Invoice',
    target_service: 'chargebee',
    target_entity: 'Invoice',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'customer', target_field: 'customer_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'subscription', target_field: 'subscription_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'number', target_field: 'invoice_number', transform: 'direct', config: {} },
      { source_field: 'status', target_field: 'status', transform: 'map_value', config: {
        mapping: {
          'draft': 'pending',
          'open': 'posted',
          'paid': 'paid',
          'uncollectible': 'voided',
          'void': 'voided'
        }
      }},
      { source_field: 'currency', target_field: 'currency_code', transform: 'uppercase', config: {} },
      { source_field: 'amount_due', target_field: 'total', transform: 'direct', config: {} },
      { source_field: 'amount_paid', target_field: 'amount_paid', transform: 'direct', config: {} },
      { source_field: 'amount_remaining', target_field: 'amount_due', transform: 'direct', config: {} },
      { source_field: 'subtotal', target_field: 'sub_total', transform: 'direct', config: {} },
      { source_field: 'tax', target_field: 'tax', transform: 'direct', config: {} },
      { source_field: 'due_date', target_field: 'due_date', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'created', target_field: 'date', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'period_start', target_field: 'billing_period_start', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'period_end', target_field: 'billing_period_end', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'billing_reason', target_field: 'meta_data.billing_reason', transform: 'direct', config: {} },
      { source_field: 'collection_method', target_field: 'dunning_status', transform: 'map_value', config: { mapping: { 'charge_automatically': 'in_progress', 'send_invoice': null } } },
      { source_field: 'attempted', target_field: 'meta_data.payment_attempted', transform: 'direct', config: {} },
      { source_field: 'attempt_count', target_field: 'dunning_attempts', transform: 'direct', config: {} },
      { source_field: 'paid', target_field: 'paid_at', transform: 'conditional_timestamp', config: { condition: 'equals', value: true } },
      { source_field: 'customer_email', target_field: 'billing_address.email', transform: 'direct', config: {} },
      { source_field: 'customer_name', target_field: 'billing_address.first_name', transform: 'split_name', config: { part: 'first' } },
      { source_field: 'description', target_field: 'notes', transform: 'direct', config: {} },
      { source_field: 'footer', target_field: 'meta_data.footer', transform: 'direct', config: {} },
      { source_field: 'hosted_invoice_url', target_field: 'meta_data.stripe_hosted_url', transform: 'direct', config: {} },
      { source_field: 'invoice_pdf', target_field: 'meta_data.stripe_pdf_url', transform: 'direct', config: {} },
      { source_field: 'metadata', target_field: 'meta_data.stripe_metadata', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 4: Stripe Product -> Chargebee Item + ItemPrice (1:many)
  // Maps Stripe products to both Item and ItemPrice in Chargebee
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Product',
    target_service: 'chargebee',
    target_entity: 'Item',
    cardinality: '1:many',
    additional_targets: [
      { service: 'chargebee', entity: 'ItemPrice' },
    ],
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'name', target_field: 'name', transform: 'direct', config: {} },
      { source_field: 'description', target_field: 'description', transform: 'direct', config: {} },
      { source_field: 'active', target_field: 'status', transform: 'map_value', config: { mapping: { true: 'active', false: 'archived' } } },
      { source_field: 'unit_label', target_field: 'unit', transform: 'direct', config: {} },
      { source_field: 'statement_descriptor', target_field: 'meta_data.statement_descriptor', transform: 'direct', config: {} },
      { source_field: 'url', target_field: 'redirect_url', transform: 'direct', config: {} },
      { source_field: 'created', target_field: 'meta_data.created_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'metadata', target_field: 'meta_data.stripe_metadata', transform: 'direct', config: {} },
      { source_field: 'livemode', target_field: 'meta_data.stripe_livemode', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 5: Stripe Price -> Chargebee ItemPrice (1:1)
  // Maps Stripe prices to Chargebee item pricing
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Price',
    target_service: 'chargebee',
    target_entity: 'ItemPrice',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'product', target_field: 'item_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'nickname', target_field: 'name', transform: 'direct', config: {} },
      { source_field: 'active', target_field: 'status', transform: 'map_value', config: { mapping: { true: 'active', false: 'archived' } } },
      { source_field: 'unit_amount', target_field: 'price', transform: 'direct', config: {} },
      { source_field: 'currency', target_field: 'currency_code', transform: 'uppercase', config: {} },
      { source_field: 'type', target_field: 'item_type', transform: 'map_value', config: { mapping: { 'recurring': 'plan', 'one_time': 'addon' } } },
      { source_field: 'billing_scheme', target_field: 'pricing_model', transform: 'map_value', config: { mapping: { 'per_unit': 'per_unit', 'tiered': 'tiered' } } },
      { source_field: 'recurring.interval', target_field: 'period_unit', transform: 'map_value', config: { mapping: { 'day': 'day', 'week': 'week', 'month': 'month', 'year': 'year' } } },
      { source_field: 'recurring.interval_count', target_field: 'period', transform: 'direct', config: {} },
      { source_field: 'recurring.usage_type', target_field: 'meta_data.usage_type', transform: 'direct', config: {} },
      { source_field: 'tax_behavior', target_field: 'is_taxable', transform: 'map_value', config: { mapping: { 'exclusive': true, 'inclusive': true, 'unspecified': false } } },
      { source_field: 'lookup_key', target_field: 'external_name', transform: 'direct', config: {} },
      { source_field: 'created', target_field: 'meta_data.created_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'metadata', target_field: 'meta_data.stripe_metadata', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 6: Stripe PaymentMethod -> Chargebee PaymentSource (1:1)
  // Maps payment methods for card-based payments
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'PaymentMethod',
    target_service: 'chargebee',
    target_entity: 'PaymentSource',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'customer', target_field: 'customer_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'type', target_field: 'type', transform: 'map_value', config: { mapping: { 'card': 'card', 'bank_account': 'direct_debit', 'sepa_debit': 'direct_debit' } } },
      { source_field: 'card.brand', target_field: 'card.brand', transform: 'map_value', config: { mapping: { 'visa': 'visa', 'mastercard': 'mastercard', 'amex': 'american_express', 'discover': 'discover', 'diners': 'diners_club', 'jcb': 'jcb' } } },
      { source_field: 'card.last4', target_field: 'card.last4', transform: 'direct', config: {} },
      { source_field: 'card.exp_month', target_field: 'card.expiry_month', transform: 'direct', config: {} },
      { source_field: 'card.exp_year', target_field: 'card.expiry_year', transform: 'direct', config: {} },
      { source_field: 'card.funding', target_field: 'card.funding_type', transform: 'map_value', config: { mapping: { 'credit': 'credit', 'debit': 'debit', 'prepaid': 'prepaid' } } },
      { source_field: 'billing_details.name', target_field: 'card.billing_address.first_name', transform: 'split_name', config: { part: 'first' } },
      { source_field: 'billing_details.email', target_field: 'card.billing_address.email', transform: 'direct', config: {} },
      { source_field: 'billing_details.phone', target_field: 'card.billing_address.phone', transform: 'direct', config: {} },
      { source_field: 'billing_details.address.line1', target_field: 'card.billing_address.line1', transform: 'direct', config: {} },
      { source_field: 'billing_details.address.city', target_field: 'card.billing_address.city', transform: 'direct', config: {} },
      { source_field: 'billing_details.address.state', target_field: 'card.billing_address.state', transform: 'direct', config: {} },
      { source_field: 'billing_details.address.postal_code', target_field: 'card.billing_address.zip', transform: 'direct', config: {} },
      { source_field: 'billing_details.address.country', target_field: 'card.billing_address.country', transform: 'direct', config: {} },
      { source_field: 'created', target_field: 'created_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'livemode', target_field: 'meta_data.stripe_livemode', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 7: Stripe Charge -> Chargebee Transaction (1:1)
  // Maps payment transactions
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Charge',
    target_service: 'chargebee',
    target_entity: 'Transaction',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'customer', target_field: 'customer_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'invoice', target_field: 'invoice_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'amount', target_field: 'amount', transform: 'direct', config: {} },
      { source_field: 'currency', target_field: 'currency_code', transform: 'uppercase', config: {} },
      { source_field: 'status', target_field: 'status', transform: 'map_value', config: { mapping: { 'succeeded': 'success', 'pending': 'in_progress', 'failed': 'failure' } } },
      { source_field: 'paid', target_field: 'type', transform: 'map_value', config: { mapping: { true: 'payment', false: 'authorization' } } },
      { source_field: 'captured', target_field: 'meta_data.captured', transform: 'direct', config: {} },
      { source_field: 'refunded', target_field: 'meta_data.refunded', transform: 'direct', config: {} },
      { source_field: 'amount_refunded', target_field: 'amount_unused', transform: 'direct', config: {} },
      { source_field: 'description', target_field: 'meta_data.description', transform: 'direct', config: {} },
      { source_field: 'failure_code', target_field: 'error_code', transform: 'direct', config: {} },
      { source_field: 'failure_message', target_field: 'error_text', transform: 'direct', config: {} },
      { source_field: 'payment_method', target_field: 'payment_source_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'receipt_email', target_field: 'meta_data.receipt_email', transform: 'direct', config: {} },
      { source_field: 'receipt_url', target_field: 'meta_data.receipt_url', transform: 'direct', config: {} },
      { source_field: 'created', target_field: 'date', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'billing_details.name', target_field: 'meta_data.billing_name', transform: 'direct', config: {} },
      { source_field: 'metadata', target_field: 'meta_data.stripe_metadata', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 8: Stripe Coupon -> Chargebee Coupon (1:1)
  // Maps discount coupons
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Coupon',
    target_service: 'chargebee',
    target_entity: 'Coupon',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'name', target_field: 'name', transform: 'direct', config: {} },
      { source_field: 'valid', target_field: 'status', transform: 'map_value', config: { mapping: { true: 'active', false: 'archived' } } },
      { source_field: 'amount_off', target_field: 'discount_amount', transform: 'direct', config: {} },
      { source_field: 'percent_off', target_field: 'discount_percentage', transform: 'direct', config: {} },
      { source_field: 'currency', target_field: 'currency_code', transform: 'uppercase', config: {} },
      { source_field: 'duration', target_field: 'duration_type', transform: 'map_value', config: { mapping: { 'forever': 'forever', 'once': 'one_time', 'repeating': 'limited_period' } } },
      { source_field: 'duration_in_months', target_field: 'duration_month', transform: 'direct', config: {} },
      { source_field: 'max_redemptions', target_field: 'max_redemptions', transform: 'direct', config: {} },
      { source_field: 'times_redeemed', target_field: 'redemptions', transform: 'direct', config: {} },
      { source_field: 'redeem_by', target_field: 'valid_till', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'created', target_field: 'created_at', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'metadata', target_field: 'meta_data', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 9: Stripe Refund -> Chargebee CreditNote (1:1)
  // Maps refunds to credit notes
  // ============================================================================
  {
    source_service: 'stripe',
    source_entity: 'Refund',
    target_service: 'chargebee',
    target_entity: 'CreditNote',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'id', target_field: 'id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'charge', target_field: 'reference_invoice_id', transform: 'prefix', config: { prefix: 'stripe_' } },
      { source_field: 'amount', target_field: 'total', transform: 'direct', config: {} },
      { source_field: 'currency', target_field: 'currency_code', transform: 'uppercase', config: {} },
      { source_field: 'status', target_field: 'status', transform: 'map_value', config: { mapping: { 'succeeded': 'refunded', 'pending': 'refund_due', 'failed': 'voided', 'canceled': 'voided' } } },
      { source_field: 'reason', target_field: 'reason_code', transform: 'map_value', config: { mapping: { 'duplicate': 'order_cancellation', 'fraudulent': 'fraudulent', 'requested_by_customer': 'order_cancellation' } } },
      { source_field: 'created', target_field: 'date', transform: 'unix_to_timestamp', config: {} },
      { source_field: 'receipt_number', target_field: 'cn_reference_invoice_id', transform: 'direct', config: {} },
      { source_field: 'metadata', target_field: 'meta_data', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 10: Multi-source Order mapping (many:1)
  // Salesforce Opportunity + Account -> Chargebee Order
  // Joined on AccountId - combines opportunity deal data with account info
  // ============================================================================
  {
    source_service: 'salesforce',
    source_entity: 'Opportunity',
    target_service: 'chargebee',
    target_entity: 'Order',
    cardinality: 'many:1',
    additional_sources: [
      { service: 'salesforce', entity: 'Account', join_key: 'Id' },
    ],
    join_config: {
      type: 'left',
      primary_source: { service: 'salesforce', entity: 'Opportunity' },
      join_conditions: [
        {
          left_source: { service: 'salesforce', entity: 'Opportunity' },
          left_field: 'AccountId',
          right_source: { service: 'salesforce', entity: 'Account' },
          right_field: 'Id',
        },
      ],
    },
    field_mappings: [
      { source_field: 'Id', target_field: 'id', transform: 'prefix', config: { prefix: 'sf_' }, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'Name', target_field: 'meta_data.opportunity_name', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'AccountId', target_field: 'customer_id', transform: 'prefix', config: { prefix: 'sf_' }, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'Amount', target_field: 'order_amount', transform: 'cents', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'StageName', target_field: 'status', transform: 'map_value', config: { mapping: { 'Closed Won': 'complete', 'Closed Lost': 'cancelled', 'Prospecting': 'new', 'Qualification': 'processing', 'Needs Analysis': 'processing', 'Value Proposition': 'processing', 'Proposal': 'processing', 'Negotiation': 'processing' } }, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'CloseDate', target_field: 'order_date', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'Description', target_field: 'meta_data.description', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'Type', target_field: 'order_type', transform: 'map_value', config: { mapping: { 'New Business': 'new', 'Existing Business': 'renewal' } }, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'LeadSource', target_field: 'meta_data.lead_source', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'NextStep', target_field: 'meta_data.next_step', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'Probability', target_field: 'meta_data.win_probability', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      { source_field: 'CreatedDate', target_field: 'created_at', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Opportunity' },
      // Account enrichment
      { source_field: 'Name', target_field: 'billing_address.company', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'BillingStreet', target_field: 'billing_address.line1', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'BillingCity', target_field: 'billing_address.city', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'BillingState', target_field: 'billing_address.state', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'BillingPostalCode', target_field: 'billing_address.zip', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'BillingCountry', target_field: 'billing_address.country', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'Phone', target_field: 'billing_address.phone', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
      { source_field: 'Industry', target_field: 'meta_data.industry', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Account' },
    ],
  },

  // ============================================================================
  // MAPPING 11: Salesforce Lead -> Chargebee Contact (1:1)
  // Maps leads as contacts (prospects) in Chargebee
  // ============================================================================
  {
    source_service: 'salesforce',
    source_entity: 'Lead',
    target_service: 'chargebee',
    target_entity: 'Contact',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'Id', target_field: 'id', transform: 'prefix', config: { prefix: 'lead_' } },
      { source_field: 'Email', target_field: 'email', transform: 'direct', config: {} },
      { source_field: 'FirstName', target_field: 'first_name', transform: 'direct', config: {} },
      { source_field: 'LastName', target_field: 'last_name', transform: 'direct', config: {} },
      { source_field: 'Phone', target_field: 'phone', transform: 'direct', config: {} },
      { source_field: 'Company', target_field: 'label', transform: 'direct', config: {} },
      { source_field: 'Title', target_field: 'meta_data.job_title', transform: 'direct', config: {} },
      { source_field: 'LeadSource', target_field: 'meta_data.lead_source', transform: 'direct', config: {} },
      { source_field: 'Status', target_field: 'meta_data.lead_status', transform: 'direct', config: {} },
      { source_field: 'Industry', target_field: 'meta_data.industry', transform: 'direct', config: {} },
      { source_field: 'CreatedDate', target_field: 'meta_data.created_at', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 14: Salesforce Case -> Chargebee Comment (1:1)
  // Maps support cases as customer comments for context
  // ============================================================================
  {
    source_service: 'salesforce',
    source_entity: 'Case',
    target_service: 'chargebee',
    target_entity: 'Comment',
    cardinality: '1:1',
    field_mappings: [
      { source_field: 'Id', target_field: 'id', transform: 'prefix', config: { prefix: 'case_' } },
      { source_field: 'AccountId', target_field: 'entity_id', transform: 'prefix', config: { prefix: 'sf_' } },
      { source_field: 'Subject', target_field: 'notes', transform: 'template', config: { template: 'Case #{{CaseNumber}}: {{value}}' } },
      { source_field: 'Description', target_field: 'notes', transform: 'append', config: { separator: '\n\n' } },
      { source_field: 'Status', target_field: 'meta_data.case_status', transform: 'direct', config: {} },
      { source_field: 'Priority', target_field: 'meta_data.priority', transform: 'direct', config: {} },
      { source_field: 'Origin', target_field: 'meta_data.case_origin', transform: 'direct', config: {} },
      { source_field: 'Type', target_field: 'meta_data.case_type', transform: 'direct', config: {} },
      { source_field: 'Reason', target_field: 'meta_data.case_reason', transform: 'direct', config: {} },
      { source_field: 'CaseNumber', target_field: 'meta_data.salesforce_case_number', transform: 'direct', config: {} },
      { source_field: 'CreatedDate', target_field: 'created_at', transform: 'direct', config: {} },
    ],
  },

  // ============================================================================
  // MAPPING 15: Multi-source Quote mapping (many:1)
  // Salesforce Quote + Contact -> Chargebee Quote
  // Joined on ContactId for customer details
  // ============================================================================
  {
    source_service: 'salesforce',
    source_entity: 'Quote',
    target_service: 'chargebee',
    target_entity: 'Quote',
    cardinality: 'many:1',
    additional_sources: [
      { service: 'salesforce', entity: 'Contact', join_key: 'Id' },
    ],
    join_config: {
      type: 'left',
      primary_source: { service: 'salesforce', entity: 'Quote' },
      join_conditions: [
        {
          left_source: { service: 'salesforce', entity: 'Quote' },
          left_field: 'ContactId',
          right_source: { service: 'salesforce', entity: 'Contact' },
          right_field: 'Id',
        },
      ],
    },
    field_mappings: [
      { source_field: 'Id', target_field: 'id', transform: 'prefix', config: { prefix: 'sf_' }, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'Name', target_field: 'name', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'QuoteNumber', target_field: 'meta_data.quote_number', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'AccountId', target_field: 'customer_id', transform: 'prefix', config: { prefix: 'sf_' }, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'Status', target_field: 'status', transform: 'map_value', config: { mapping: { 'Draft': 'open', 'Needs Review': 'open', 'In Review': 'open', 'Approved': 'open', 'Rejected': 'declined', 'Presented': 'open', 'Accepted': 'accepted', 'Denied': 'declined' } }, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'ExpirationDate', target_field: 'valid_till', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'GrandTotal', target_field: 'total', transform: 'cents', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'Subtotal', target_field: 'sub_total', transform: 'cents', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'Discount', target_field: 'meta_data.discount_percent', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'Tax', target_field: 'tax', transform: 'cents', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'Description', target_field: 'notes', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      { source_field: 'CreatedDate', target_field: 'date', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Quote' },
      // Contact enrichment
      { source_field: 'Email', target_field: 'billing_address.email', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'FirstName', target_field: 'billing_address.first_name', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'LastName', target_field: 'billing_address.last_name', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
      { source_field: 'Phone', target_field: 'billing_address.phone', transform: 'direct', config: {}, source_service: 'salesforce', source_entity: 'Contact' },
    ],
  },
];

const initialState = {
  activeTab: 'migrate' as WorkspaceTab,
  name: 'Stripe + Salesforce to Chargebee Migration',
  description: 'Migrate customer and subscription data from Stripe and contact data from Salesforce into Chargebee',
  availableSchemas: allAvailableSchemas,
  sourceSchemas: seedSourceSchemas,
  targetSchema: seedTargetSchema,
  sources: seedSources,
  targetService: 'chargebee',
  targetSite: '',
  targetApiKey: '',
  entityMappings: seedEntityMappings,
  dryRun: true,
  batchSize: 100,
  migrationId: null as string | null,
  progress: null as ProgressEvent | null,
  sampleData: [] as Record<string, unknown>[],
  chatMessages: [] as ChatMessage[],
  schemaPanelCollapsed: false,
  focusedSchema: null as { service: string; entity: string } | null,
  schemasModified: false,
  mappingsModified: false,
  // Saved state (for discard functionality) - initially matches current state
  savedSourceSchemas: seedSourceSchemas,
  savedTargetSchema: seedTargetSchema,
  savedEntityMappings: seedEntityMappings,
};

export const useMigrationStore = create<MigrationWorkspaceState>((set) => ({
  ...initialState,

  setActiveTab: (activeTab) => set({ activeTab }),

  setName: (name) => set({ name }),
  setDescription: (description) => set({ description }),

  // Available schemas management
  removeAvailableSchema: (service, entity) =>
    set((state) => ({
      availableSchemas: state.availableSchemas.filter(
        (s) => !(s.service === service && s.entity === entity)
      ),
    })),

  // Schema management
  setSourceSchemas: (sourceSchemas) => set({ sourceSchemas, schemasModified: true }),
  addSourceSchema: (schema) =>
    set((state) => ({ sourceSchemas: [...state.sourceSchemas, schema], schemasModified: true })),
  updateSourceSchema: (service, entity, schema) =>
    set((state) => ({
      sourceSchemas: state.sourceSchemas.map((s) =>
        s.service === service && s.entity === entity ? schema : s
      ),
      schemasModified: true,
    })),
  removeSourceSchema: (service, entity) =>
    set((state) => ({
      sourceSchemas: state.sourceSchemas.filter(
        (s) => !(s.service === service && s.entity === entity)
      ),
      schemasModified: true,
    })),

  setTargetSchema: (targetSchema) => set({ targetSchema, schemasModified: true }),

  // Source management
  addSource: (source) =>
    set((state) => ({ sources: [...state.sources, source] })),
  updateSource: (index, source) =>
    set((state) => ({
      sources: state.sources.map((s, i) => (i === index ? source : s)),
    })),
  removeSource: (index) =>
    set((state) => ({
      sources: state.sources.filter((_, i) => i !== index),
    })),
  setSources: (sources) => set({ sources }),

  setTargetService: (targetService) => set({ targetService }),
  setTargetSite: (targetSite) => set({ targetSite }),
  setTargetApiKey: (targetApiKey) => set({ targetApiKey }),

  // Mapping management
  setEntityMappings: (entityMappings) => set({ entityMappings, mappingsModified: true }),
  addEntityMapping: (mapping) =>
    set((state) => ({ entityMappings: [...state.entityMappings, mapping], mappingsModified: true })),
  updateEntityMapping: (index, mapping) =>
    set((state) => ({
      entityMappings: state.entityMappings.map((m, i) =>
        i === index ? mapping : m
      ),
      mappingsModified: true,
    })),
  removeEntityMapping: (index) =>
    set((state) => ({
      entityMappings: state.entityMappings.filter((_, i) => i !== index),
      mappingsModified: true,
    })),

  setDryRun: (dryRun) => set({ dryRun }),
  setBatchSize: (batchSize) => set({ batchSize }),

  setMigrationId: (migrationId) => set({ migrationId }),
  setProgress: (progress) => set({ progress }),
  setSampleData: (sampleData) => set({ sampleData }),

  // Chat
  addChatMessage: (message) =>
    set((state) => ({ chatMessages: [...state.chatMessages, message] })),
  clearChatMessages: () => set({ chatMessages: [] }),

  setSchemaPanelCollapsed: (schemaPanelCollapsed) => set({ schemaPanelCollapsed }),

  setFocusedSchema: (focusedSchema) => set({ focusedSchema }),

  // Dirty state management
  setSchemasModified: (schemasModified) => set({ schemasModified }),
  setMappingsModified: (mappingsModified) => set({ mappingsModified }),

  // Mark current state as saved (creates snapshot for discard)
  markSchemasSaved: () =>
    set((state) => ({
      savedSourceSchemas: JSON.parse(JSON.stringify(state.sourceSchemas)),
      savedTargetSchema: state.targetSchema ? JSON.parse(JSON.stringify(state.targetSchema)) : null,
      schemasModified: false,
    })),
  markMappingsSaved: () =>
    set((state) => ({
      savedEntityMappings: JSON.parse(JSON.stringify(state.entityMappings)),
      mappingsModified: false,
    })),

  // Discard pending changes (revert to saved state)
  discardSchemaChanges: () =>
    set((state) => ({
      sourceSchemas: JSON.parse(JSON.stringify(state.savedSourceSchemas)),
      targetSchema: state.savedTargetSchema ? JSON.parse(JSON.stringify(state.savedTargetSchema)) : null,
      schemasModified: false,
    })),
  discardMappingChanges: () =>
    set((state) => ({
      entityMappings: JSON.parse(JSON.stringify(state.savedEntityMappings)),
      mappingsModified: false,
    })),

  reset: () => set(initialState),
}));
